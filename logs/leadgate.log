2026-01-06 16:01:24,761 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 16:01:24,762 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-06 16:01:24,762 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-06 16:01:24,762 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 16:01:24,763 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 16:01:24,763 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:99]
2026-01-06 16:01:24,763 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 16:01:24,764 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 16:01:24,764 - python_multipart.multipart - DEBUG - Calling on_header_field with data[143:162]
2026-01-06 16:01:24,765 - python_multipart.multipart - DEBUG - Calling on_header_value with data[164:190]
2026-01-06 16:01:24,765 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 16:01:24,765 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 16:01:24,765 - python_multipart.multipart - DEBUG - Calling on_part_data with data[194:200]
2026-01-06 16:01:24,765 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 16:01:24,766 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-06 16:06:20,087 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 16:06:20,088 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-06 16:06:20,088 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-06 16:06:20,089 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 16:06:20,089 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 16:06:20,089 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-06 16:06:20,089 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 16:06:20,089 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 16:06:20,090 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-06 16:06:20,090 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-06 16:06:20,090 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 16:06:20,090 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 16:06:20,090 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:198]
2026-01-06 16:06:20,091 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 16:06:20,091 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-06 16:06:24,741 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 16:06:24,742 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-06 16:06:24,742 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-06 16:06:24,742 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 16:06:24,742 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 16:06:24,742 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-06 16:06:24,743 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 16:06:24,743 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 16:06:24,743 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-06 16:06:24,743 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-06 16:06:24,743 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 16:06:24,744 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 16:06:24,744 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:199]
2026-01-06 16:06:24,744 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 16:06:24,744 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-06 16:06:26,258 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 16:06:26,259 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-06 16:06:26,259 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-06 16:06:26,260 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 16:06:26,260 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 16:06:26,260 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-06 16:06:26,260 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 16:06:26,260 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 16:06:26,261 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-06 16:06:26,261 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-06 16:06:26,261 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 16:06:26,261 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 16:06:26,262 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:200]
2026-01-06 16:06:26,262 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 16:06:26,262 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-06 16:06:40,301 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 16:06:40,301 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-06 16:06:40,301 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-06 16:06:40,301 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 16:06:40,302 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 16:06:40,302 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-06 16:06:40,302 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 16:06:40,303 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 16:06:40,303 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-06 16:06:40,303 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-06 16:06:40,303 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 16:06:40,304 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 16:06:40,304 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:196]
2026-01-06 16:06:40,304 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 16:06:40,304 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-06 16:06:42,649 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 16:06:42,649 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-06 16:06:42,649 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-06 16:06:42,649 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 16:06:42,649 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 16:06:42,650 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-06 16:06:42,650 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 16:06:42,650 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 16:06:42,650 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-06 16:06:42,651 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-06 16:06:42,651 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 16:06:42,651 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 16:06:42,651 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:195]
2026-01-06 16:06:42,651 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 16:06:42,652 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-06 16:07:02,161 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 16:07:02,163 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-06 16:07:02,163 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-06 16:07:02,164 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 16:07:02,164 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 16:07:02,165 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-06 16:07:02,166 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 16:07:02,166 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 16:07:02,166 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-06 16:07:02,166 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-06 16:07:02,167 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 16:07:02,167 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 16:07:02,167 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:199]
2026-01-06 16:07:02,167 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 16:07:02,168 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-06 16:13:05,819 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 16:13:05,820 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-06 16:13:05,821 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:86]
2026-01-06 16:13:05,821 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 16:13:05,821 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 16:13:05,821 - python_multipart.multipart - DEBUG - Calling on_part_data with data[90:108]
2026-01-06 16:13:05,822 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 16:13:05,822 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 16:13:05,822 - python_multipart.multipart - DEBUG - Calling on_header_field with data[152:171]
2026-01-06 16:13:05,822 - python_multipart.multipart - DEBUG - Calling on_header_value with data[173:199]
2026-01-06 16:13:05,822 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 16:13:05,822 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 16:13:05,822 - python_multipart.multipart - DEBUG - Calling on_part_data with data[203:211]
2026-01-06 16:13:05,823 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 16:13:05,823 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-06 16:31:11,400 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 16:31:11,401 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-06 16:31:11,401 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:106]
2026-01-06 16:31:11,401 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 16:31:11,401 - python_multipart.multipart - DEBUG - Calling on_header_field with data[108:120]
2026-01-06 16:31:11,402 - python_multipart.multipart - DEBUG - Calling on_header_value with data[122:130]
2026-01-06 16:31:11,402 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 16:31:11,402 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 16:31:11,402 - python_multipart.multipart - DEBUG - Calling on_part_data with data[134:352]
2026-01-06 16:31:11,403 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 16:31:11,403 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-06 17:47:32,521 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 17:47:32,522 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-06 17:47:32,522 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-06 17:47:32,522 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 17:47:32,522 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 17:47:32,523 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:99]
2026-01-06 17:47:32,523 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 17:47:32,523 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 17:47:32,524 - python_multipart.multipart - DEBUG - Calling on_header_field with data[143:162]
2026-01-06 17:47:32,524 - python_multipart.multipart - DEBUG - Calling on_header_value with data[164:190]
2026-01-06 17:47:32,524 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 17:47:32,524 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 17:47:32,525 - python_multipart.multipart - DEBUG - Calling on_part_data with data[194:200]
2026-01-06 17:47:32,525 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 17:47:32,525 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-06 17:48:03,782 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 17:48:03,783 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-06 17:48:03,783 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-06 17:48:03,783 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 17:48:03,784 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 17:48:03,784 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-06 17:48:03,784 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 17:48:03,784 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 17:48:03,784 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-06 17:48:03,785 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-06 17:48:03,785 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 17:48:03,785 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 17:48:03,785 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:199]
2026-01-06 17:48:03,785 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 17:48:03,786 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-06 18:39:02,175 - stripe - INFO - message='Request to Stripe api' method=post url=https://api.stripe.com/v1/payment_intents
2026-01-06 18:39:02,176 - stripe - DEBUG - api_version=2025-12-15.clover message='Post details' post_data=amount=59529&currency=eur&description=Credits-Aufladung+f%C3%BCr+5+Leads&metadata[makler_id]=3&metadata[makler_firmenname]=Theisen+Immobilien&metadata[betrag_netto_euro]=500.0&metadata[betrag_brutto_euro]=595.3&metadata[mwst_euro]=95.0&metadata[transaktionsgebuehr_euro]=0.3&automatic_payment_methods[enabled]=true
2026-01-06 18:39:02,181 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.stripe.com:443
2026-01-06 18:39:03,250 - urllib3.connectionpool - DEBUG - https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 2059
2026-01-06 18:39:03,251 - stripe - INFO - message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2026-01-06 18:39:03,251 - stripe - DEBUG - body='{\n  "id": "pi_3SmeDiK0VJts9ADL1PCyXPiE",\n  "object": "payment_intent",\n  "amount": 59529,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": {\n    "allow_redirects": "always",\n    "enabled": true\n  },\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic_async",\n  "client_secret": "pi_3SmeDiK0VJts9ADL1PCyXPiE_secret_W1LGvaiOWmUwRttyCpkr9iSPw",\n  "confirmation_method": "automatic",\n  "created": 1767721142,\n  "currency": "eur",\n  "customer": null,\n  "customer_account": null,\n  "description": "Credits-Aufladung für 5 Leads",\n  "excluded_payment_method_types": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": true,\n  "metadata": {\n    "betrag_brutto_euro": "595.3",\n    "betrag_netto_euro": "500.0",\n    "makler_firmenname": "Theisen Immobilien",\n    "makler_id": "3",\n    "mwst_euro": "95.0",\n    "transaktionsgebuehr_euro": "0.3"\n  },\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_configuration_details": {\n    "id": "pmc_1SlYLYK0VJts9ADLoJIDLMHU",\n    "parent": null\n  },\n  "payment_method_options": {\n    "amazon_pay": {\n      "express_checkout_element_session_id": null\n    },\n    "bancontact": {\n      "preferred_language": "en"\n    },\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    },\n    "eps": {},\n    "klarna": {\n      "preferred_locale": null\n    },\n    "link": {\n      "persistent_token": null\n    }\n  },\n  "payment_method_types": [\n    "card",\n    "bancontact",\n    "eps",\n    "klarna",\n    "link",\n    "amazon_pay"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2026-01-06 18:39:03,252 - stripe - DEBUG - link=https://dashboard.stripe.com/live/logs/req_e60KM93qUCvn9h message='Dashboard link for request'
2026-01-06 18:43:51,109 - leadgate.main - ERROR - Unhandled exception: 'str' object has no attribute 'value'
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\leads.py", line 313, in update_lead
    if lead.status.value != schemas.LeadStatus.QUALIFIZIERT.value:
       ^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'value'
2026-01-06 18:53:46,196 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 18:53:46,197 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-06 18:53:46,197 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:86]
2026-01-06 18:53:46,198 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 18:53:46,198 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 18:53:46,198 - python_multipart.multipart - DEBUG - Calling on_part_data with data[90:101]
2026-01-06 18:53:46,199 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 18:53:46,199 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 18:53:46,199 - python_multipart.multipart - DEBUG - Calling on_header_field with data[145:164]
2026-01-06 18:53:46,199 - python_multipart.multipart - DEBUG - Calling on_header_value with data[166:192]
2026-01-06 18:53:46,199 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 18:53:46,200 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 18:53:46,200 - python_multipart.multipart - DEBUG - Calling on_part_data with data[196:202]
2026-01-06 18:53:46,200 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 18:53:46,201 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-06 21:35:46,140 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 21:35:46,140 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-06 21:35:46,140 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:106]
2026-01-06 21:35:46,141 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 21:35:46,141 - python_multipart.multipart - DEBUG - Calling on_header_field with data[108:120]
2026-01-06 21:35:46,141 - python_multipart.multipart - DEBUG - Calling on_header_value with data[122:130]
2026-01-06 21:35:46,141 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 21:35:46,141 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 21:35:46,141 - python_multipart.multipart - DEBUG - Calling on_part_data with data[134:352]
2026-01-06 21:35:46,142 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 21:35:46,142 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-06 21:37:56,314 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 21:37:56,315 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-06 21:37:56,315 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:86]
2026-01-06 21:37:56,315 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 21:37:56,315 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 21:37:56,315 - python_multipart.multipart - DEBUG - Calling on_part_data with data[90:105]
2026-01-06 21:37:56,315 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 21:37:56,316 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 21:37:56,316 - python_multipart.multipart - DEBUG - Calling on_header_field with data[149:168]
2026-01-06 21:37:56,316 - python_multipart.multipart - DEBUG - Calling on_header_value with data[170:196]
2026-01-06 21:37:56,316 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 21:37:56,316 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 21:37:56,316 - python_multipart.multipart - DEBUG - Calling on_part_data with data[200:205]
2026-01-06 21:37:56,316 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 21:37:56,317 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-06 21:40:22,088 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 21:40:22,089 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-06 21:40:22,089 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-06 21:40:22,089 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 21:40:22,089 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 21:40:22,090 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:99]
2026-01-06 21:40:22,090 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 21:40:22,090 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 21:40:22,090 - python_multipart.multipart - DEBUG - Calling on_header_field with data[143:162]
2026-01-06 21:40:22,090 - python_multipart.multipart - DEBUG - Calling on_header_value with data[164:190]
2026-01-06 21:40:22,090 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 21:40:22,091 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 21:40:22,091 - python_multipart.multipart - DEBUG - Calling on_part_data with data[194:200]
2026-01-06 21:40:22,091 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 21:40:22,091 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-06 21:40:44,518 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 21:40:44,518 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-06 21:40:44,518 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-06 21:40:44,519 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 21:40:44,519 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 21:40:44,519 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-06 21:40:44,519 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 21:40:44,519 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 21:40:44,519 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-06 21:40:44,519 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-06 21:40:44,520 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 21:40:44,520 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 21:40:44,520 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:199]
2026-01-06 21:40:44,520 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 21:40:44,520 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-06 21:46:47,597 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 21:46:47,598 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-06 21:46:47,598 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:106]
2026-01-06 21:46:47,598 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 21:46:47,598 - python_multipart.multipart - DEBUG - Calling on_header_field with data[108:120]
2026-01-06 21:46:47,598 - python_multipart.multipart - DEBUG - Calling on_header_value with data[122:130]
2026-01-06 21:46:47,598 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 21:46:47,599 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 21:46:47,599 - python_multipart.multipart - DEBUG - Calling on_part_data with data[134:352]
2026-01-06 21:46:47,599 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 21:46:47,599 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-06 22:02:54,871 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 22:02:54,872 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-06 22:02:54,872 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-06 22:02:54,872 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 22:02:54,872 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 22:02:54,873 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-06 22:02:54,873 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 22:02:54,873 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 22:02:54,873 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-06 22:02:54,873 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-06 22:02:54,873 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 22:02:54,874 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 22:02:54,874 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:199]
2026-01-06 22:02:54,874 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 22:02:54,874 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-06 22:32:00,388 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 22:32:00,388 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-06 22:32:00,388 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:86]
2026-01-06 22:32:00,389 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 22:32:00,389 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 22:32:00,389 - python_multipart.multipart - DEBUG - Calling on_part_data with data[90:105]
2026-01-06 22:32:00,389 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 22:32:00,389 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 22:32:00,389 - python_multipart.multipart - DEBUG - Calling on_header_field with data[149:168]
2026-01-06 22:32:00,389 - python_multipart.multipart - DEBUG - Calling on_header_value with data[170:196]
2026-01-06 22:32:00,389 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 22:32:00,389 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 22:32:00,390 - python_multipart.multipart - DEBUG - Calling on_part_data with data[200:206]
2026-01-06 22:32:00,390 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 22:32:00,390 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-06 22:32:03,420 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 22:32:03,420 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-06 22:32:03,420 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:86]
2026-01-06 22:32:03,420 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 22:32:03,420 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 22:32:03,420 - python_multipart.multipart - DEBUG - Calling on_part_data with data[90:105]
2026-01-06 22:32:03,421 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 22:32:03,421 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 22:32:03,421 - python_multipart.multipart - DEBUG - Calling on_header_field with data[149:168]
2026-01-06 22:32:03,421 - python_multipart.multipart - DEBUG - Calling on_header_value with data[170:196]
2026-01-06 22:32:03,421 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 22:32:03,421 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 22:32:03,421 - python_multipart.multipart - DEBUG - Calling on_part_data with data[200:205]
2026-01-06 22:32:03,421 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 22:32:03,422 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-06 22:35:24,824 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 22:35:24,825 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-06 22:35:24,825 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:120]
2026-01-06 22:35:24,825 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 22:35:24,825 - python_multipart.multipart - DEBUG - Calling on_header_field with data[122:134]
2026-01-06 22:35:24,825 - python_multipart.multipart - DEBUG - Calling on_header_value with data[136:151]
2026-01-06 22:35:24,825 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 22:35:24,825 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 22:35:24,825 - python_multipart.multipart - DEBUG - Calling on_part_data with data[155:2868]
2026-01-06 22:35:24,825 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 22:35:24,825 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 22:35:24,825 - python_multipart.multipart - DEBUG - Calling on_header_field with data[2912:2931]
2026-01-06 22:35:24,826 - python_multipart.multipart - DEBUG - Calling on_header_value with data[2933:2963]
2026-01-06 22:35:24,826 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 22:35:24,826 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 22:35:24,826 - python_multipart.multipart - DEBUG - Calling on_part_data with data[2967:2970]
2026-01-06 22:35:24,826 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 22:35:24,826 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-06 22:35:24,830 - leadgate.makler - DEBUG - Speichere Datei: C:\GateCRMLINK\makler_dokumente\1_20260106_223524_Rechnung_SARA_0601.pdf
2026-01-06 22:35:24,831 - leadgate.makler - DEBUG - Datei gespeichert, Größe: 2713 bytes
2026-01-06 22:35:24,837 - leadgate.makler - INFO - Dokument hochgeladen: ID=5, Makler=1, Dateiname=Rechnung_SARA_0601.pdf
2026-01-06 22:46:25,845 - stripe - INFO - message='Request to Stripe api' method=post url=https://api.stripe.com/v1/payment_intents
2026-01-06 22:46:25,845 - stripe - DEBUG - api_version=2025-12-15.clover message='Post details' post_data=amount=178530&currency=eur&description=Credits-Aufladung+f%C3%BCr+15+Leads&metadata[makler_id]=1&metadata[makler_firmenname]=testgbmh&metadata[betrag_netto_euro]=1500.0&metadata[betrag_brutto_euro]=1785.3&metadata[mwst_euro]=285.0&metadata[transaktionsgebuehr_euro]=0.3&automatic_payment_methods[enabled]=true
2026-01-06 22:46:25,848 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.stripe.com:443
2026-01-06 22:46:27,083 - urllib3.connectionpool - DEBUG - https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 2054
2026-01-06 22:46:27,083 - stripe - INFO - message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2026-01-06 22:46:27,084 - stripe - DEBUG - body='{\n  "id": "pi_3Smi58K0VJts9ADL11TBXyJJ",\n  "object": "payment_intent",\n  "amount": 178530,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": {\n    "allow_redirects": "always",\n    "enabled": true\n  },\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic_async",\n  "client_secret": "pi_3Smi58K0VJts9ADL11TBXyJJ_secret_DZjuQlr1JpQThyqLgPY5WWdNi",\n  "confirmation_method": "automatic",\n  "created": 1767735986,\n  "currency": "eur",\n  "customer": null,\n  "customer_account": null,\n  "description": "Credits-Aufladung für 15 Leads",\n  "excluded_payment_method_types": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": true,\n  "metadata": {\n    "betrag_brutto_euro": "1785.3",\n    "betrag_netto_euro": "1500.0",\n    "makler_firmenname": "testgbmh",\n    "makler_id": "1",\n    "mwst_euro": "285.0",\n    "transaktionsgebuehr_euro": "0.3"\n  },\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_configuration_details": {\n    "id": "pmc_1SlYLYK0VJts9ADLoJIDLMHU",\n    "parent": null\n  },\n  "payment_method_options": {\n    "amazon_pay": {\n      "express_checkout_element_session_id": null\n    },\n    "bancontact": {\n      "preferred_language": "en"\n    },\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    },\n    "eps": {},\n    "klarna": {\n      "preferred_locale": null\n    },\n    "link": {\n      "persistent_token": null\n    }\n  },\n  "payment_method_types": [\n    "card",\n    "bancontact",\n    "eps",\n    "klarna",\n    "link",\n    "amazon_pay"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2026-01-06 22:46:27,084 - stripe - DEBUG - link=https://dashboard.stripe.com/live/logs/req_CnR0DmGXdveDkp message='Dashboard link for request'
2026-01-06 22:54:35,559 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 22:54:35,559 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-06 22:54:35,559 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-06 22:54:35,559 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 22:54:35,559 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 22:54:35,560 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-06 22:54:35,560 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 22:54:35,560 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 22:54:35,560 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-06 22:54:35,560 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-06 22:54:35,560 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 22:54:35,560 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 22:54:35,560 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:199]
2026-01-06 22:54:35,561 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 22:54:35,561 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-06 23:18:37,705 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 23:18:37,705 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-06 23:18:37,705 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-06 23:18:37,705 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 23:18:37,706 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 23:18:37,706 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-06 23:18:37,706 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 23:18:37,706 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 23:18:37,706 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-06 23:18:37,706 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-06 23:18:37,706 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 23:18:37,706 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 23:18:37,707 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:199]
2026-01-06 23:18:37,707 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 23:18:37,707 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-06 23:34:29,867 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 23:34:29,867 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-06 23:34:29,867 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:106]
2026-01-06 23:34:29,867 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 23:34:29,867 - python_multipart.multipart - DEBUG - Calling on_header_field with data[108:120]
2026-01-06 23:34:29,868 - python_multipart.multipart - DEBUG - Calling on_header_value with data[122:130]
2026-01-06 23:34:29,868 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 23:34:29,868 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 23:34:29,868 - python_multipart.multipart - DEBUG - Calling on_part_data with data[134:352]
2026-01-06 23:34:29,868 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 23:34:29,868 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-06 23:55:32,319 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 23:55:32,320 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-06 23:55:32,320 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-06 23:55:32,320 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 23:55:32,320 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 23:55:32,320 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-06 23:55:32,321 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 23:55:32,321 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-06 23:55:32,321 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-06 23:55:32,321 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-06 23:55:32,321 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-06 23:55:32,321 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-06 23:55:32,321 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:199]
2026-01-06 23:55:32,322 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-06 23:55:32,322 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 00:00:58,407 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 00:00:58,408 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 00:00:58,408 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-07 00:00:58,408 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:00:58,408 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 00:00:58,409 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-07 00:00:58,409 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 00:00:58,409 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 00:00:58,409 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-07 00:00:58,409 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-07 00:00:58,410 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:00:58,410 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 00:00:58,410 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:199]
2026-01-07 00:00:58,410 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 00:00:58,410 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 00:01:08,710 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 00:01:08,710 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 00:01:08,710 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:106]
2026-01-07 00:01:08,710 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:01:08,710 - python_multipart.multipart - DEBUG - Calling on_header_field with data[108:120]
2026-01-07 00:01:08,711 - python_multipart.multipart - DEBUG - Calling on_header_value with data[122:130]
2026-01-07 00:01:08,711 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:01:08,711 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 00:01:08,711 - python_multipart.multipart - DEBUG - Calling on_part_data with data[134:352]
2026-01-07 00:01:08,711 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 00:01:08,711 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 00:01:30,792 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 00:01:30,792 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 00:01:30,792 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:106]
2026-01-07 00:01:30,792 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:01:30,793 - python_multipart.multipart - DEBUG - Calling on_header_field with data[108:120]
2026-01-07 00:01:30,793 - python_multipart.multipart - DEBUG - Calling on_header_value with data[122:130]
2026-01-07 00:01:30,793 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:01:30,793 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 00:01:30,793 - python_multipart.multipart - DEBUG - Calling on_part_data with data[134:352]
2026-01-07 00:01:30,793 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 00:01:30,794 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 00:01:48,533 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 00:01:48,533 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 00:01:48,533 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:106]
2026-01-07 00:01:48,534 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:01:48,534 - python_multipart.multipart - DEBUG - Calling on_header_field with data[108:120]
2026-01-07 00:01:48,534 - python_multipart.multipart - DEBUG - Calling on_header_value with data[122:130]
2026-01-07 00:01:48,534 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:01:48,534 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 00:01:48,535 - python_multipart.multipart - DEBUG - Calling on_part_data with data[134:352]
2026-01-07 00:01:48,535 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 00:01:48,535 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 00:01:56,220 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 00:01:56,220 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 00:01:56,221 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:106]
2026-01-07 00:01:56,221 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:01:56,221 - python_multipart.multipart - DEBUG - Calling on_header_field with data[108:120]
2026-01-07 00:01:56,221 - python_multipart.multipart - DEBUG - Calling on_header_value with data[122:130]
2026-01-07 00:01:56,222 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:01:56,222 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 00:01:56,222 - python_multipart.multipart - DEBUG - Calling on_part_data with data[134:352]
2026-01-07 00:01:56,222 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 00:01:56,223 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 00:02:02,747 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 00:02:02,747 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 00:02:02,748 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:106]
2026-01-07 00:02:02,748 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:02:02,748 - python_multipart.multipart - DEBUG - Calling on_header_field with data[108:120]
2026-01-07 00:02:02,748 - python_multipart.multipart - DEBUG - Calling on_header_value with data[122:130]
2026-01-07 00:02:02,748 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:02:02,748 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 00:02:02,749 - python_multipart.multipart - DEBUG - Calling on_part_data with data[134:352]
2026-01-07 00:02:02,749 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 00:02:02,749 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 00:02:30,080 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 00:02:30,080 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 00:02:30,080 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-07 00:02:30,081 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:02:30,081 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 00:02:30,081 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:99]
2026-01-07 00:02:30,081 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 00:02:30,081 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 00:02:30,082 - python_multipart.multipart - DEBUG - Calling on_header_field with data[143:162]
2026-01-07 00:02:30,082 - python_multipart.multipart - DEBUG - Calling on_header_value with data[164:190]
2026-01-07 00:02:30,082 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:02:30,082 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 00:02:30,082 - python_multipart.multipart - DEBUG - Calling on_part_data with data[194:200]
2026-01-07 00:02:30,082 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 00:02:30,083 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 00:04:32,250 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 00:04:32,250 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 00:04:32,250 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:106]
2026-01-07 00:04:32,250 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:04:32,251 - python_multipart.multipart - DEBUG - Calling on_header_field with data[108:120]
2026-01-07 00:04:32,251 - python_multipart.multipart - DEBUG - Calling on_header_value with data[122:130]
2026-01-07 00:04:32,251 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:04:32,251 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 00:04:32,251 - python_multipart.multipart - DEBUG - Calling on_part_data with data[134:352]
2026-01-07 00:04:32,251 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 00:04:32,251 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 00:04:59,609 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 00:04:59,609 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 00:04:59,610 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-07 00:04:59,610 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:04:59,610 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 00:04:59,610 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-07 00:04:59,611 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 00:04:59,611 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 00:04:59,611 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-07 00:04:59,611 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-07 00:04:59,611 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:04:59,611 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 00:04:59,612 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:199]
2026-01-07 00:04:59,612 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 00:04:59,612 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 00:17:29,892 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 00:17:29,893 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 00:17:29,893 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-07 00:17:29,893 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:17:29,893 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 00:17:29,893 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-07 00:17:29,894 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 00:17:29,894 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 00:17:29,894 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-07 00:17:29,895 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-07 00:17:29,895 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:17:29,895 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 00:17:29,895 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:199]
2026-01-07 00:17:29,896 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 00:17:29,896 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 00:34:38,309 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 694, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:34:38,409 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.hashed_password AS users_1_hashed_password, users_1.is_active AS users_1_is_active, users_1.role AS users_1_role, users_1.created_at AS users_1_created_at, users_1.updated_at AS users_1_updated_at, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.hashed_password AS users_2_hashed_password, users_2.is_active AS users_2_is_active, users_2.role AS users_2_role, users_2.created_at AS users_2_created_at, users_2.updated_at AS users_2_updated_at 
FROM chat_messages LEFT OUTER JOIN users AS users_1 ON users_1.id = chat_messages.from_user_id LEFT OUTER JOIN users AS users_2 ON users_2.id = chat_messages.to_user_id 
WHERE (chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ?) AND chat_messages.id > ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 10, 10, 6, 32, 100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 827, in get_conversation_messages
    messages = query.order_by(ChatMessage.erstellt_am.desc()).limit(limit).all()
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.hashed_password AS users_1_hashed_password, users_1.is_active AS users_1_is_active, users_1.role AS users_1_role, users_1.created_at AS users_1_created_at, users_1.updated_at AS users_1_updated_at, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.hashed_password AS users_2_hashed_password, users_2.is_active AS users_2_is_active, users_2.role AS users_2_role, users_2.created_at AS users_2_created_at, users_2.updated_at AS users_2_updated_at 
FROM chat_messages LEFT OUTER JOIN users AS users_1 ON users_1.id = chat_messages.from_user_id LEFT OUTER JOIN users AS users_2 ON users_2.id = chat_messages.to_user_id 
WHERE (chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ?) AND chat_messages.id > ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 10, 10, 6, 32, 100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:34:43,604 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 694, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:35:00,607 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 694, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:35:00,876 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.hashed_password AS users_1_hashed_password, users_1.is_active AS users_1_is_active, users_1.role AS users_1_role, users_1.created_at AS users_1_created_at, users_1.updated_at AS users_1_updated_at, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.hashed_password AS users_2_hashed_password, users_2.is_active AS users_2_is_active, users_2.role AS users_2_role, users_2.created_at AS users_2_created_at, users_2.updated_at AS users_2_updated_at 
FROM chat_messages LEFT OUTER JOIN users AS users_1 ON users_1.id = chat_messages.from_user_id LEFT OUTER JOIN users AS users_2 ON users_2.id = chat_messages.to_user_id 
WHERE (chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ?) AND chat_messages.id > ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 10, 10, 6, 32, 100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 827, in get_conversation_messages
    messages = query.order_by(ChatMessage.erstellt_am.desc()).limit(limit).all()
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.hashed_password AS users_1_hashed_password, users_1.is_active AS users_1_is_active, users_1.role AS users_1_role, users_1.created_at AS users_1_created_at, users_1.updated_at AS users_1_updated_at, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.hashed_password AS users_2_hashed_password, users_2.is_active AS users_2_is_active, users_2.role AS users_2_role, users_2.created_at AS users_2_created_at, users_2.updated_at AS users_2_updated_at 
FROM chat_messages LEFT OUTER JOIN users AS users_1 ON users_1.id = chat_messages.from_user_id LEFT OUTER JOIN users AS users_2 ON users_2.id = chat_messages.to_user_id 
WHERE (chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ?) AND chat_messages.id > ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 10, 10, 6, 32, 100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:35:43,645 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 694, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:35:43,861 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 694, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:35:44,009 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.hashed_password AS users_1_hashed_password, users_1.is_active AS users_1_is_active, users_1.role AS users_1_role, users_1.created_at AS users_1_created_at, users_1.updated_at AS users_1_updated_at, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.hashed_password AS users_2_hashed_password, users_2.is_active AS users_2_is_active, users_2.role AS users_2_role, users_2.created_at AS users_2_created_at, users_2.updated_at AS users_2_updated_at 
FROM chat_messages LEFT OUTER JOIN users AS users_1 ON users_1.id = chat_messages.from_user_id LEFT OUTER JOIN users AS users_2 ON users_2.id = chat_messages.to_user_id 
WHERE (chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ?) AND chat_messages.id > ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 10, 10, 6, 32, 100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 827, in get_conversation_messages
    messages = query.order_by(ChatMessage.erstellt_am.desc()).limit(limit).all()
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.hashed_password AS users_1_hashed_password, users_1.is_active AS users_1_is_active, users_1.role AS users_1_role, users_1.created_at AS users_1_created_at, users_1.updated_at AS users_1_updated_at, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.hashed_password AS users_2_hashed_password, users_2.is_active AS users_2_is_active, users_2.role AS users_2_role, users_2.created_at AS users_2_created_at, users_2.updated_at AS users_2_updated_at 
FROM chat_messages LEFT OUTER JOIN users AS users_1 ON users_1.id = chat_messages.from_user_id LEFT OUTER JOIN users AS users_2 ON users_2.id = chat_messages.to_user_id 
WHERE (chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ?) AND chat_messages.id > ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 10, 10, 6, 32, 100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:36:43,631 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 694, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:36:43,857 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 694, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:36:43,991 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.hashed_password AS users_1_hashed_password, users_1.is_active AS users_1_is_active, users_1.role AS users_1_role, users_1.created_at AS users_1_created_at, users_1.updated_at AS users_1_updated_at, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.hashed_password AS users_2_hashed_password, users_2.is_active AS users_2_is_active, users_2.role AS users_2_role, users_2.created_at AS users_2_created_at, users_2.updated_at AS users_2_updated_at 
FROM chat_messages LEFT OUTER JOIN users AS users_1 ON users_1.id = chat_messages.from_user_id LEFT OUTER JOIN users AS users_2 ON users_2.id = chat_messages.to_user_id 
WHERE (chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ?) AND chat_messages.id > ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 10, 10, 6, 32, 100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 827, in get_conversation_messages
    messages = query.order_by(ChatMessage.erstellt_am.desc()).limit(limit).all()
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.hashed_password AS users_1_hashed_password, users_1.is_active AS users_1_is_active, users_1.role AS users_1_role, users_1.created_at AS users_1_created_at, users_1.updated_at AS users_1_updated_at, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.hashed_password AS users_2_hashed_password, users_2.is_active AS users_2_is_active, users_2.role AS users_2_role, users_2.created_at AS users_2_created_at, users_2.updated_at AS users_2_updated_at 
FROM chat_messages LEFT OUTER JOIN users AS users_1 ON users_1.id = chat_messages.from_user_id LEFT OUTER JOIN users AS users_2 ON users_2.id = chat_messages.to_user_id 
WHERE (chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ?) AND chat_messages.id > ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 10, 10, 6, 32, 100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:37:43,647 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 718, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:37:43,844 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 718, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:37:44,005 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.hashed_password AS users_1_hashed_password, users_1.is_active AS users_1_is_active, users_1.role AS users_1_role, users_1.created_at AS users_1_created_at, users_1.updated_at AS users_1_updated_at, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.hashed_password AS users_2_hashed_password, users_2.is_active AS users_2_is_active, users_2.role AS users_2_role, users_2.created_at AS users_2_created_at, users_2.updated_at AS users_2_updated_at 
FROM chat_messages LEFT OUTER JOIN users AS users_1 ON users_1.id = chat_messages.from_user_id LEFT OUTER JOIN users AS users_2 ON users_2.id = chat_messages.to_user_id 
WHERE (chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ?) AND chat_messages.id > ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 10, 10, 6, 32, 100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 851, in get_conversation_messages
    messages = query.order_by(ChatMessage.erstellt_am.desc()).limit(limit).all()
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.hashed_password AS users_1_hashed_password, users_1.is_active AS users_1_is_active, users_1.role AS users_1_role, users_1.created_at AS users_1_created_at, users_1.updated_at AS users_1_updated_at, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.hashed_password AS users_2_hashed_password, users_2.is_active AS users_2_is_active, users_2.role AS users_2_role, users_2.created_at AS users_2_created_at, users_2.updated_at AS users_2_updated_at 
FROM chat_messages LEFT OUTER JOIN users AS users_1 ON users_1.id = chat_messages.from_user_id LEFT OUTER JOIN users AS users_2 ON users_2.id = chat_messages.to_user_id 
WHERE (chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ?) AND chat_messages.id > ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 10, 10, 6, 32, 100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:38:43,630 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:38:43,839 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:38:43,984 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.hashed_password AS users_1_hashed_password, users_1.is_active AS users_1_is_active, users_1.role AS users_1_role, users_1.created_at AS users_1_created_at, users_1.updated_at AS users_1_updated_at, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.hashed_password AS users_2_hashed_password, users_2.is_active AS users_2_is_active, users_2.role AS users_2_role, users_2.created_at AS users_2_created_at, users_2.updated_at AS users_2_updated_at 
FROM chat_messages LEFT OUTER JOIN users AS users_1 ON users_1.id = chat_messages.from_user_id LEFT OUTER JOIN users AS users_2 ON users_2.id = chat_messages.to_user_id 
WHERE (chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ?) AND chat_messages.id > ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 10, 10, 6, 32, 100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 896, in get_conversation_messages
    messages = query.order_by(ChatMessage.erstellt_am.desc()).limit(limit).all()
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.hashed_password AS users_1_hashed_password, users_1.is_active AS users_1_is_active, users_1.role AS users_1_role, users_1.created_at AS users_1_created_at, users_1.updated_at AS users_1_updated_at, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.hashed_password AS users_2_hashed_password, users_2.is_active AS users_2_is_active, users_2.role AS users_2_role, users_2.created_at AS users_2_created_at, users_2.updated_at AS users_2_updated_at 
FROM chat_messages LEFT OUTER JOIN users AS users_1 ON users_1.id = chat_messages.from_user_id LEFT OUTER JOIN users AS users_2 ON users_2.id = chat_messages.to_user_id 
WHERE (chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ?) AND chat_messages.id > ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 10, 10, 6, 32, 100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:39:19,590 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:39:19,785 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:39:19,963 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.hashed_password AS users_1_hashed_password, users_1.is_active AS users_1_is_active, users_1.role AS users_1_role, users_1.created_at AS users_1_created_at, users_1.updated_at AS users_1_updated_at, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.hashed_password AS users_2_hashed_password, users_2.is_active AS users_2_is_active, users_2.role AS users_2_role, users_2.created_at AS users_2_created_at, users_2.updated_at AS users_2_updated_at 
FROM chat_messages LEFT OUTER JOIN users AS users_1 ON users_1.id = chat_messages.from_user_id LEFT OUTER JOIN users AS users_2 ON users_2.id = chat_messages.to_user_id 
WHERE (chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ?) AND chat_messages.id > ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 10, 10, 6, 32, 100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 915, in get_conversation_messages
    messages = query.order_by(ChatMessage.erstellt_am.desc()).limit(limit).all()
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.hashed_password AS users_1_hashed_password, users_1.is_active AS users_1_is_active, users_1.role AS users_1_role, users_1.created_at AS users_1_created_at, users_1.updated_at AS users_1_updated_at, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.hashed_password AS users_2_hashed_password, users_2.is_active AS users_2_is_active, users_2.role AS users_2_role, users_2.created_at AS users_2_created_at, users_2.updated_at AS users_2_updated_at 
FROM chat_messages LEFT OUTER JOIN users AS users_1 ON users_1.id = chat_messages.from_user_id LEFT OUTER JOIN users AS users_2 ON users_2.id = chat_messages.to_user_id 
WHERE (chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ?) AND chat_messages.id > ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 10, 10, 6, 32, 100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:39:21,113 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:39:21,908 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:39:23,878 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:39:32,605 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:39:42,279 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:39:52,597 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:39:54,279 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:40:02,592 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:40:12,283 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:40:22,584 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:40:24,275 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:40:32,576 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:40:43,281 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:40:54,580 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:41:24,276 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:41:43,574 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:41:54,283 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:42:24,579 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:42:43,278 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:43:34,041 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:43:34,298 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:43:38,289 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:43:41,123 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:43:48,282 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:43:51,401 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.hashed_password AS users_1_hashed_password, users_1.is_active AS users_1_is_active, users_1.role AS users_1_role, users_1.created_at AS users_1_created_at, users_1.updated_at AS users_1_updated_at, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.hashed_password AS users_2_hashed_password, users_2.is_active AS users_2_is_active, users_2.role AS users_2_role, users_2.created_at AS users_2_created_at, users_2.updated_at AS users_2_updated_at, makler_1.id AS makler_1_id, makler_1.firmenname AS makler_1_firmenname, makler_1.ansprechpartner AS makler_1_ansprechpartner, makler_1.email AS makler_1_email, makler_1.adresse AS makler_1_adresse, makler_1.vertragsstart_datum AS makler_1_vertragsstart_datum, makler_1.testphase_leads AS makler_1_testphase_leads, makler_1.testphase_preis AS makler_1_testphase_preis, makler_1.standard_preis AS makler_1_standard_preis, makler_1.monatliche_soll_leads AS makler_1_monatliche_soll_leads, makler_1.rechnungs_code AS makler_1_rechnungs_code, makler_1.notizen AS makler_1_notizen, makler_1.gebiet AS makler_1_gebiet, makler_1.gatelink_password AS makler_1_gatelink_password, makler_1.vertrag_pausiert AS makler_1_vertrag_pausiert, makler_1.vertrag_bis AS makler_1_vertrag_bis, makler_1.created_by_user_id AS makler_1_created_by_user_id, makler_1.modified_by_user_id AS makler_1_modified_by_user_id, makler_1.rechnungssystem_typ AS makler_1_rechnungssystem_typ, makler_1.erste_leads_anzahl AS makler_1_erste_leads_anzahl, makler_1.erste_leads_preis AS makler_1_erste_leads_preis, makler_1.erste_leads_danach_preis AS makler_1_erste_leads_danach_preis, makler_1.automatische_aufladung_aktiv AS makler_1_automatische_aufladung_aktiv, makler_1.automatische_aufladung_betrag AS makler_1_automatische_aufladung_betrag, makler_1.automatische_aufladung_tag AS makler_1_automatische_aufladung_tag, makler_2.id AS makler_2_id, makler_2.firmenname AS makler_2_firmenname, makler_2.ansprechpartner AS makler_2_ansprechpartner, makler_2.email AS makler_2_email, makler_2.adresse AS makler_2_adresse, makler_2.vertragsstart_datum AS makler_2_vertragsstart_datum, makler_2.testphase_leads AS makler_2_testphase_leads, makler_2.testphase_preis AS makler_2_testphase_preis, makler_2.standard_preis AS makler_2_standard_preis, makler_2.monatliche_soll_leads AS makler_2_monatliche_soll_leads, makler_2.rechnungs_code AS makler_2_rechnungs_code, makler_2.notizen AS makler_2_notizen, makler_2.gebiet AS makler_2_gebiet, makler_2.gatelink_password AS makler_2_gatelink_password, makler_2.vertrag_pausiert AS makler_2_vertrag_pausiert, makler_2.vertrag_bis AS makler_2_vertrag_bis, makler_2.created_by_user_id AS makler_2_created_by_user_id, makler_2.modified_by_user_id AS makler_2_modified_by_user_id, makler_2.rechnungssystem_typ AS makler_2_rechnungssystem_typ, makler_2.erste_leads_anzahl AS makler_2_erste_leads_anzahl, makler_2.erste_leads_preis AS makler_2_erste_leads_preis, makler_2.erste_leads_danach_preis AS makler_2_erste_leads_danach_preis, makler_2.automatische_aufladung_aktiv AS makler_2_automatische_aufladung_aktiv, makler_2.automatische_aufladung_betrag AS makler_2_automatische_aufladung_betrag, makler_2.automatische_aufladung_tag AS makler_2_automatische_aufladung_tag 
FROM chat_messages LEFT OUTER JOIN users AS users_1 ON users_1.id = chat_messages.from_user_id LEFT OUTER JOIN users AS users_2 ON users_2.id = chat_messages.to_user_id LEFT OUTER JOIN makler AS makler_1 ON makler_1.id = chat_messages.from_makler_id LEFT OUTER JOIN makler AS makler_2 ON makler_2.id = chat_messages.to_makler_id 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_makler_id = ? OR chat_messages.from_makler_id = ? AND (chat_messages.to_user_id = ? OR chat_messages.to_user_id IS NULL) ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 1, 1, 6, 100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 954, in get_conversation_messages
    messages = query.order_by(ChatMessage.erstellt_am.desc()).limit(limit).all()
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.hashed_password AS users_1_hashed_password, users_1.is_active AS users_1_is_active, users_1.role AS users_1_role, users_1.created_at AS users_1_created_at, users_1.updated_at AS users_1_updated_at, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.hashed_password AS users_2_hashed_password, users_2.is_active AS users_2_is_active, users_2.role AS users_2_role, users_2.created_at AS users_2_created_at, users_2.updated_at AS users_2_updated_at, makler_1.id AS makler_1_id, makler_1.firmenname AS makler_1_firmenname, makler_1.ansprechpartner AS makler_1_ansprechpartner, makler_1.email AS makler_1_email, makler_1.adresse AS makler_1_adresse, makler_1.vertragsstart_datum AS makler_1_vertragsstart_datum, makler_1.testphase_leads AS makler_1_testphase_leads, makler_1.testphase_preis AS makler_1_testphase_preis, makler_1.standard_preis AS makler_1_standard_preis, makler_1.monatliche_soll_leads AS makler_1_monatliche_soll_leads, makler_1.rechnungs_code AS makler_1_rechnungs_code, makler_1.notizen AS makler_1_notizen, makler_1.gebiet AS makler_1_gebiet, makler_1.gatelink_password AS makler_1_gatelink_password, makler_1.vertrag_pausiert AS makler_1_vertrag_pausiert, makler_1.vertrag_bis AS makler_1_vertrag_bis, makler_1.created_by_user_id AS makler_1_created_by_user_id, makler_1.modified_by_user_id AS makler_1_modified_by_user_id, makler_1.rechnungssystem_typ AS makler_1_rechnungssystem_typ, makler_1.erste_leads_anzahl AS makler_1_erste_leads_anzahl, makler_1.erste_leads_preis AS makler_1_erste_leads_preis, makler_1.erste_leads_danach_preis AS makler_1_erste_leads_danach_preis, makler_1.automatische_aufladung_aktiv AS makler_1_automatische_aufladung_aktiv, makler_1.automatische_aufladung_betrag AS makler_1_automatische_aufladung_betrag, makler_1.automatische_aufladung_tag AS makler_1_automatische_aufladung_tag, makler_2.id AS makler_2_id, makler_2.firmenname AS makler_2_firmenname, makler_2.ansprechpartner AS makler_2_ansprechpartner, makler_2.email AS makler_2_email, makler_2.adresse AS makler_2_adresse, makler_2.vertragsstart_datum AS makler_2_vertragsstart_datum, makler_2.testphase_leads AS makler_2_testphase_leads, makler_2.testphase_preis AS makler_2_testphase_preis, makler_2.standard_preis AS makler_2_standard_preis, makler_2.monatliche_soll_leads AS makler_2_monatliche_soll_leads, makler_2.rechnungs_code AS makler_2_rechnungs_code, makler_2.notizen AS makler_2_notizen, makler_2.gebiet AS makler_2_gebiet, makler_2.gatelink_password AS makler_2_gatelink_password, makler_2.vertrag_pausiert AS makler_2_vertrag_pausiert, makler_2.vertrag_bis AS makler_2_vertrag_bis, makler_2.created_by_user_id AS makler_2_created_by_user_id, makler_2.modified_by_user_id AS makler_2_modified_by_user_id, makler_2.rechnungssystem_typ AS makler_2_rechnungssystem_typ, makler_2.erste_leads_anzahl AS makler_2_erste_leads_anzahl, makler_2.erste_leads_preis AS makler_2_erste_leads_preis, makler_2.erste_leads_danach_preis AS makler_2_erste_leads_danach_preis, makler_2.automatische_aufladung_aktiv AS makler_2_automatische_aufladung_aktiv, makler_2.automatische_aufladung_betrag AS makler_2_automatische_aufladung_betrag, makler_2.automatische_aufladung_tag AS makler_2_automatische_aufladung_tag 
FROM chat_messages LEFT OUTER JOIN users AS users_1 ON users_1.id = chat_messages.from_user_id LEFT OUTER JOIN users AS users_2 ON users_2.id = chat_messages.to_user_id LEFT OUTER JOIN makler AS makler_1 ON makler_1.id = chat_messages.from_makler_id LEFT OUTER JOIN makler AS makler_2 ON makler_2.id = chat_messages.to_makler_id 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_makler_id = ? OR chat_messages.from_makler_id = ? AND (chat_messages.to_user_id = ? OR chat_messages.to_user_id IS NULL) ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 1, 1, 6, 100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:43:55,505 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) table chat_messages has no column named chat_gruppe_id
[SQL: INSERT INTO chat_messages (from_user_id, from_makler_id, to_user_id, to_makler_id, chat_gruppe_id, nachricht, erstellt_am, gelesen) VALUES (?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (6, None, None, 1, None, 'hi', '2026-01-06 23:43:55.383250', 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: table chat_messages has no column named chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 559, in send_chat_message
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2030, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 1311, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 1286, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 4331, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 4466, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 4427, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table chat_messages has no column named chat_gruppe_id
[SQL: INSERT INTO chat_messages (from_user_id, from_makler_id, to_user_id, to_makler_id, chat_gruppe_id, nachricht, erstellt_am, gelesen) VALUES (?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (6, None, None, 1, None, 'hi', '2026-01-06 23:43:55.383250', 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:43:58,587 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:44:08,587 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:44:11,194 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:44:11,541 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.hashed_password AS users_1_hashed_password, users_1.is_active AS users_1_is_active, users_1.role AS users_1_role, users_1.created_at AS users_1_created_at, users_1.updated_at AS users_1_updated_at, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.hashed_password AS users_2_hashed_password, users_2.is_active AS users_2_is_active, users_2.role AS users_2_role, users_2.created_at AS users_2_created_at, users_2.updated_at AS users_2_updated_at, makler_1.id AS makler_1_id, makler_1.firmenname AS makler_1_firmenname, makler_1.ansprechpartner AS makler_1_ansprechpartner, makler_1.email AS makler_1_email, makler_1.adresse AS makler_1_adresse, makler_1.vertragsstart_datum AS makler_1_vertragsstart_datum, makler_1.testphase_leads AS makler_1_testphase_leads, makler_1.testphase_preis AS makler_1_testphase_preis, makler_1.standard_preis AS makler_1_standard_preis, makler_1.monatliche_soll_leads AS makler_1_monatliche_soll_leads, makler_1.rechnungs_code AS makler_1_rechnungs_code, makler_1.notizen AS makler_1_notizen, makler_1.gebiet AS makler_1_gebiet, makler_1.gatelink_password AS makler_1_gatelink_password, makler_1.vertrag_pausiert AS makler_1_vertrag_pausiert, makler_1.vertrag_bis AS makler_1_vertrag_bis, makler_1.created_by_user_id AS makler_1_created_by_user_id, makler_1.modified_by_user_id AS makler_1_modified_by_user_id, makler_1.rechnungssystem_typ AS makler_1_rechnungssystem_typ, makler_1.erste_leads_anzahl AS makler_1_erste_leads_anzahl, makler_1.erste_leads_preis AS makler_1_erste_leads_preis, makler_1.erste_leads_danach_preis AS makler_1_erste_leads_danach_preis, makler_1.automatische_aufladung_aktiv AS makler_1_automatische_aufladung_aktiv, makler_1.automatische_aufladung_betrag AS makler_1_automatische_aufladung_betrag, makler_1.automatische_aufladung_tag AS makler_1_automatische_aufladung_tag, makler_2.id AS makler_2_id, makler_2.firmenname AS makler_2_firmenname, makler_2.ansprechpartner AS makler_2_ansprechpartner, makler_2.email AS makler_2_email, makler_2.adresse AS makler_2_adresse, makler_2.vertragsstart_datum AS makler_2_vertragsstart_datum, makler_2.testphase_leads AS makler_2_testphase_leads, makler_2.testphase_preis AS makler_2_testphase_preis, makler_2.standard_preis AS makler_2_standard_preis, makler_2.monatliche_soll_leads AS makler_2_monatliche_soll_leads, makler_2.rechnungs_code AS makler_2_rechnungs_code, makler_2.notizen AS makler_2_notizen, makler_2.gebiet AS makler_2_gebiet, makler_2.gatelink_password AS makler_2_gatelink_password, makler_2.vertrag_pausiert AS makler_2_vertrag_pausiert, makler_2.vertrag_bis AS makler_2_vertrag_bis, makler_2.created_by_user_id AS makler_2_created_by_user_id, makler_2.modified_by_user_id AS makler_2_modified_by_user_id, makler_2.rechnungssystem_typ AS makler_2_rechnungssystem_typ, makler_2.erste_leads_anzahl AS makler_2_erste_leads_anzahl, makler_2.erste_leads_preis AS makler_2_erste_leads_preis, makler_2.erste_leads_danach_preis AS makler_2_erste_leads_danach_preis, makler_2.automatische_aufladung_aktiv AS makler_2_automatische_aufladung_aktiv, makler_2.automatische_aufladung_betrag AS makler_2_automatische_aufladung_betrag, makler_2.automatische_aufladung_tag AS makler_2_automatische_aufladung_tag 
FROM chat_messages LEFT OUTER JOIN users AS users_1 ON users_1.id = chat_messages.from_user_id LEFT OUTER JOIN users AS users_2 ON users_2.id = chat_messages.to_user_id LEFT OUTER JOIN makler AS makler_1 ON makler_1.id = chat_messages.from_makler_id LEFT OUTER JOIN makler AS makler_2 ON makler_2.id = chat_messages.to_makler_id 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_makler_id = ? OR chat_messages.from_makler_id = ? AND (chat_messages.to_user_id = ? OR chat_messages.to_user_id IS NULL) ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 1, 1, 6, 100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 954, in get_conversation_messages
    messages = query.order_by(ChatMessage.erstellt_am.desc()).limit(limit).all()
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.hashed_password AS users_1_hashed_password, users_1.is_active AS users_1_is_active, users_1.role AS users_1_role, users_1.created_at AS users_1_created_at, users_1.updated_at AS users_1_updated_at, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.hashed_password AS users_2_hashed_password, users_2.is_active AS users_2_is_active, users_2.role AS users_2_role, users_2.created_at AS users_2_created_at, users_2.updated_at AS users_2_updated_at, makler_1.id AS makler_1_id, makler_1.firmenname AS makler_1_firmenname, makler_1.ansprechpartner AS makler_1_ansprechpartner, makler_1.email AS makler_1_email, makler_1.adresse AS makler_1_adresse, makler_1.vertragsstart_datum AS makler_1_vertragsstart_datum, makler_1.testphase_leads AS makler_1_testphase_leads, makler_1.testphase_preis AS makler_1_testphase_preis, makler_1.standard_preis AS makler_1_standard_preis, makler_1.monatliche_soll_leads AS makler_1_monatliche_soll_leads, makler_1.rechnungs_code AS makler_1_rechnungs_code, makler_1.notizen AS makler_1_notizen, makler_1.gebiet AS makler_1_gebiet, makler_1.gatelink_password AS makler_1_gatelink_password, makler_1.vertrag_pausiert AS makler_1_vertrag_pausiert, makler_1.vertrag_bis AS makler_1_vertrag_bis, makler_1.created_by_user_id AS makler_1_created_by_user_id, makler_1.modified_by_user_id AS makler_1_modified_by_user_id, makler_1.rechnungssystem_typ AS makler_1_rechnungssystem_typ, makler_1.erste_leads_anzahl AS makler_1_erste_leads_anzahl, makler_1.erste_leads_preis AS makler_1_erste_leads_preis, makler_1.erste_leads_danach_preis AS makler_1_erste_leads_danach_preis, makler_1.automatische_aufladung_aktiv AS makler_1_automatische_aufladung_aktiv, makler_1.automatische_aufladung_betrag AS makler_1_automatische_aufladung_betrag, makler_1.automatische_aufladung_tag AS makler_1_automatische_aufladung_tag, makler_2.id AS makler_2_id, makler_2.firmenname AS makler_2_firmenname, makler_2.ansprechpartner AS makler_2_ansprechpartner, makler_2.email AS makler_2_email, makler_2.adresse AS makler_2_adresse, makler_2.vertragsstart_datum AS makler_2_vertragsstart_datum, makler_2.testphase_leads AS makler_2_testphase_leads, makler_2.testphase_preis AS makler_2_testphase_preis, makler_2.standard_preis AS makler_2_standard_preis, makler_2.monatliche_soll_leads AS makler_2_monatliche_soll_leads, makler_2.rechnungs_code AS makler_2_rechnungs_code, makler_2.notizen AS makler_2_notizen, makler_2.gebiet AS makler_2_gebiet, makler_2.gatelink_password AS makler_2_gatelink_password, makler_2.vertrag_pausiert AS makler_2_vertrag_pausiert, makler_2.vertrag_bis AS makler_2_vertrag_bis, makler_2.created_by_user_id AS makler_2_created_by_user_id, makler_2.modified_by_user_id AS makler_2_modified_by_user_id, makler_2.rechnungssystem_typ AS makler_2_rechnungssystem_typ, makler_2.erste_leads_anzahl AS makler_2_erste_leads_anzahl, makler_2.erste_leads_preis AS makler_2_erste_leads_preis, makler_2.erste_leads_danach_preis AS makler_2_erste_leads_danach_preis, makler_2.automatische_aufladung_aktiv AS makler_2_automatische_aufladung_aktiv, makler_2.automatische_aufladung_betrag AS makler_2_automatische_aufladung_betrag, makler_2.automatische_aufladung_tag AS makler_2_automatische_aufladung_tag 
FROM chat_messages LEFT OUTER JOIN users AS users_1 ON users_1.id = chat_messages.from_user_id LEFT OUTER JOIN users AS users_2 ON users_2.id = chat_messages.to_user_id LEFT OUTER JOIN makler AS makler_1 ON makler_1.id = chat_messages.from_makler_id LEFT OUTER JOIN makler AS makler_2 ON makler_2.id = chat_messages.to_makler_id 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_makler_id = ? OR chat_messages.from_makler_id = ? AND (chat_messages.to_user_id = ? OR chat_messages.to_user_id IS NULL) ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 1, 1, 6, 100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:44:18,282 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:44:28,594 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:44:38,294 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:44:41,603 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:44:41,842 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.hashed_password AS users_1_hashed_password, users_1.is_active AS users_1_is_active, users_1.role AS users_1_role, users_1.created_at AS users_1_created_at, users_1.updated_at AS users_1_updated_at, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.hashed_password AS users_2_hashed_password, users_2.is_active AS users_2_is_active, users_2.role AS users_2_role, users_2.created_at AS users_2_created_at, users_2.updated_at AS users_2_updated_at, makler_1.id AS makler_1_id, makler_1.firmenname AS makler_1_firmenname, makler_1.ansprechpartner AS makler_1_ansprechpartner, makler_1.email AS makler_1_email, makler_1.adresse AS makler_1_adresse, makler_1.vertragsstart_datum AS makler_1_vertragsstart_datum, makler_1.testphase_leads AS makler_1_testphase_leads, makler_1.testphase_preis AS makler_1_testphase_preis, makler_1.standard_preis AS makler_1_standard_preis, makler_1.monatliche_soll_leads AS makler_1_monatliche_soll_leads, makler_1.rechnungs_code AS makler_1_rechnungs_code, makler_1.notizen AS makler_1_notizen, makler_1.gebiet AS makler_1_gebiet, makler_1.gatelink_password AS makler_1_gatelink_password, makler_1.vertrag_pausiert AS makler_1_vertrag_pausiert, makler_1.vertrag_bis AS makler_1_vertrag_bis, makler_1.created_by_user_id AS makler_1_created_by_user_id, makler_1.modified_by_user_id AS makler_1_modified_by_user_id, makler_1.rechnungssystem_typ AS makler_1_rechnungssystem_typ, makler_1.erste_leads_anzahl AS makler_1_erste_leads_anzahl, makler_1.erste_leads_preis AS makler_1_erste_leads_preis, makler_1.erste_leads_danach_preis AS makler_1_erste_leads_danach_preis, makler_1.automatische_aufladung_aktiv AS makler_1_automatische_aufladung_aktiv, makler_1.automatische_aufladung_betrag AS makler_1_automatische_aufladung_betrag, makler_1.automatische_aufladung_tag AS makler_1_automatische_aufladung_tag, makler_2.id AS makler_2_id, makler_2.firmenname AS makler_2_firmenname, makler_2.ansprechpartner AS makler_2_ansprechpartner, makler_2.email AS makler_2_email, makler_2.adresse AS makler_2_adresse, makler_2.vertragsstart_datum AS makler_2_vertragsstart_datum, makler_2.testphase_leads AS makler_2_testphase_leads, makler_2.testphase_preis AS makler_2_testphase_preis, makler_2.standard_preis AS makler_2_standard_preis, makler_2.monatliche_soll_leads AS makler_2_monatliche_soll_leads, makler_2.rechnungs_code AS makler_2_rechnungs_code, makler_2.notizen AS makler_2_notizen, makler_2.gebiet AS makler_2_gebiet, makler_2.gatelink_password AS makler_2_gatelink_password, makler_2.vertrag_pausiert AS makler_2_vertrag_pausiert, makler_2.vertrag_bis AS makler_2_vertrag_bis, makler_2.created_by_user_id AS makler_2_created_by_user_id, makler_2.modified_by_user_id AS makler_2_modified_by_user_id, makler_2.rechnungssystem_typ AS makler_2_rechnungssystem_typ, makler_2.erste_leads_anzahl AS makler_2_erste_leads_anzahl, makler_2.erste_leads_preis AS makler_2_erste_leads_preis, makler_2.erste_leads_danach_preis AS makler_2_erste_leads_danach_preis, makler_2.automatische_aufladung_aktiv AS makler_2_automatische_aufladung_aktiv, makler_2.automatische_aufladung_betrag AS makler_2_automatische_aufladung_betrag, makler_2.automatische_aufladung_tag AS makler_2_automatische_aufladung_tag 
FROM chat_messages LEFT OUTER JOIN users AS users_1 ON users_1.id = chat_messages.from_user_id LEFT OUTER JOIN users AS users_2 ON users_2.id = chat_messages.to_user_id LEFT OUTER JOIN makler AS makler_1 ON makler_1.id = chat_messages.from_makler_id LEFT OUTER JOIN makler AS makler_2 ON makler_2.id = chat_messages.to_makler_id 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_makler_id = ? OR chat_messages.from_makler_id = ? AND (chat_messages.to_user_id = ? OR chat_messages.to_user_id IS NULL) ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 1, 1, 6, 100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 954, in get_conversation_messages
    messages = query.order_by(ChatMessage.erstellt_am.desc()).limit(limit).all()
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.hashed_password AS users_1_hashed_password, users_1.is_active AS users_1_is_active, users_1.role AS users_1_role, users_1.created_at AS users_1_created_at, users_1.updated_at AS users_1_updated_at, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.hashed_password AS users_2_hashed_password, users_2.is_active AS users_2_is_active, users_2.role AS users_2_role, users_2.created_at AS users_2_created_at, users_2.updated_at AS users_2_updated_at, makler_1.id AS makler_1_id, makler_1.firmenname AS makler_1_firmenname, makler_1.ansprechpartner AS makler_1_ansprechpartner, makler_1.email AS makler_1_email, makler_1.adresse AS makler_1_adresse, makler_1.vertragsstart_datum AS makler_1_vertragsstart_datum, makler_1.testphase_leads AS makler_1_testphase_leads, makler_1.testphase_preis AS makler_1_testphase_preis, makler_1.standard_preis AS makler_1_standard_preis, makler_1.monatliche_soll_leads AS makler_1_monatliche_soll_leads, makler_1.rechnungs_code AS makler_1_rechnungs_code, makler_1.notizen AS makler_1_notizen, makler_1.gebiet AS makler_1_gebiet, makler_1.gatelink_password AS makler_1_gatelink_password, makler_1.vertrag_pausiert AS makler_1_vertrag_pausiert, makler_1.vertrag_bis AS makler_1_vertrag_bis, makler_1.created_by_user_id AS makler_1_created_by_user_id, makler_1.modified_by_user_id AS makler_1_modified_by_user_id, makler_1.rechnungssystem_typ AS makler_1_rechnungssystem_typ, makler_1.erste_leads_anzahl AS makler_1_erste_leads_anzahl, makler_1.erste_leads_preis AS makler_1_erste_leads_preis, makler_1.erste_leads_danach_preis AS makler_1_erste_leads_danach_preis, makler_1.automatische_aufladung_aktiv AS makler_1_automatische_aufladung_aktiv, makler_1.automatische_aufladung_betrag AS makler_1_automatische_aufladung_betrag, makler_1.automatische_aufladung_tag AS makler_1_automatische_aufladung_tag, makler_2.id AS makler_2_id, makler_2.firmenname AS makler_2_firmenname, makler_2.ansprechpartner AS makler_2_ansprechpartner, makler_2.email AS makler_2_email, makler_2.adresse AS makler_2_adresse, makler_2.vertragsstart_datum AS makler_2_vertragsstart_datum, makler_2.testphase_leads AS makler_2_testphase_leads, makler_2.testphase_preis AS makler_2_testphase_preis, makler_2.standard_preis AS makler_2_standard_preis, makler_2.monatliche_soll_leads AS makler_2_monatliche_soll_leads, makler_2.rechnungs_code AS makler_2_rechnungs_code, makler_2.notizen AS makler_2_notizen, makler_2.gebiet AS makler_2_gebiet, makler_2.gatelink_password AS makler_2_gatelink_password, makler_2.vertrag_pausiert AS makler_2_vertrag_pausiert, makler_2.vertrag_bis AS makler_2_vertrag_bis, makler_2.created_by_user_id AS makler_2_created_by_user_id, makler_2.modified_by_user_id AS makler_2_modified_by_user_id, makler_2.rechnungssystem_typ AS makler_2_rechnungssystem_typ, makler_2.erste_leads_anzahl AS makler_2_erste_leads_anzahl, makler_2.erste_leads_preis AS makler_2_erste_leads_preis, makler_2.erste_leads_danach_preis AS makler_2_erste_leads_danach_preis, makler_2.automatische_aufladung_aktiv AS makler_2_automatische_aufladung_aktiv, makler_2.automatische_aufladung_betrag AS makler_2_automatische_aufladung_betrag, makler_2.automatische_aufladung_tag AS makler_2_automatische_aufladung_tag 
FROM chat_messages LEFT OUTER JOIN users AS users_1 ON users_1.id = chat_messages.from_user_id LEFT OUTER JOIN users AS users_2 ON users_2.id = chat_messages.to_user_id LEFT OUTER JOIN makler AS makler_1 ON makler_1.id = chat_messages.from_makler_id LEFT OUTER JOIN makler AS makler_2 ON makler_2.id = chat_messages.to_makler_id 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_makler_id = ? OR chat_messages.from_makler_id = ? AND (chat_messages.to_user_id = ? OR chat_messages.to_user_id IS NULL) ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 1, 1, 6, 100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:44:48,295 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:44:58,599 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:45:08,290 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:45:11,580 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:45:11,827 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.hashed_password AS users_1_hashed_password, users_1.is_active AS users_1_is_active, users_1.role AS users_1_role, users_1.created_at AS users_1_created_at, users_1.updated_at AS users_1_updated_at, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.hashed_password AS users_2_hashed_password, users_2.is_active AS users_2_is_active, users_2.role AS users_2_role, users_2.created_at AS users_2_created_at, users_2.updated_at AS users_2_updated_at, makler_1.id AS makler_1_id, makler_1.firmenname AS makler_1_firmenname, makler_1.ansprechpartner AS makler_1_ansprechpartner, makler_1.email AS makler_1_email, makler_1.adresse AS makler_1_adresse, makler_1.vertragsstart_datum AS makler_1_vertragsstart_datum, makler_1.testphase_leads AS makler_1_testphase_leads, makler_1.testphase_preis AS makler_1_testphase_preis, makler_1.standard_preis AS makler_1_standard_preis, makler_1.monatliche_soll_leads AS makler_1_monatliche_soll_leads, makler_1.rechnungs_code AS makler_1_rechnungs_code, makler_1.notizen AS makler_1_notizen, makler_1.gebiet AS makler_1_gebiet, makler_1.gatelink_password AS makler_1_gatelink_password, makler_1.vertrag_pausiert AS makler_1_vertrag_pausiert, makler_1.vertrag_bis AS makler_1_vertrag_bis, makler_1.created_by_user_id AS makler_1_created_by_user_id, makler_1.modified_by_user_id AS makler_1_modified_by_user_id, makler_1.rechnungssystem_typ AS makler_1_rechnungssystem_typ, makler_1.erste_leads_anzahl AS makler_1_erste_leads_anzahl, makler_1.erste_leads_preis AS makler_1_erste_leads_preis, makler_1.erste_leads_danach_preis AS makler_1_erste_leads_danach_preis, makler_1.automatische_aufladung_aktiv AS makler_1_automatische_aufladung_aktiv, makler_1.automatische_aufladung_betrag AS makler_1_automatische_aufladung_betrag, makler_1.automatische_aufladung_tag AS makler_1_automatische_aufladung_tag, makler_2.id AS makler_2_id, makler_2.firmenname AS makler_2_firmenname, makler_2.ansprechpartner AS makler_2_ansprechpartner, makler_2.email AS makler_2_email, makler_2.adresse AS makler_2_adresse, makler_2.vertragsstart_datum AS makler_2_vertragsstart_datum, makler_2.testphase_leads AS makler_2_testphase_leads, makler_2.testphase_preis AS makler_2_testphase_preis, makler_2.standard_preis AS makler_2_standard_preis, makler_2.monatliche_soll_leads AS makler_2_monatliche_soll_leads, makler_2.rechnungs_code AS makler_2_rechnungs_code, makler_2.notizen AS makler_2_notizen, makler_2.gebiet AS makler_2_gebiet, makler_2.gatelink_password AS makler_2_gatelink_password, makler_2.vertrag_pausiert AS makler_2_vertrag_pausiert, makler_2.vertrag_bis AS makler_2_vertrag_bis, makler_2.created_by_user_id AS makler_2_created_by_user_id, makler_2.modified_by_user_id AS makler_2_modified_by_user_id, makler_2.rechnungssystem_typ AS makler_2_rechnungssystem_typ, makler_2.erste_leads_anzahl AS makler_2_erste_leads_anzahl, makler_2.erste_leads_preis AS makler_2_erste_leads_preis, makler_2.erste_leads_danach_preis AS makler_2_erste_leads_danach_preis, makler_2.automatische_aufladung_aktiv AS makler_2_automatische_aufladung_aktiv, makler_2.automatische_aufladung_betrag AS makler_2_automatische_aufladung_betrag, makler_2.automatische_aufladung_tag AS makler_2_automatische_aufladung_tag 
FROM chat_messages LEFT OUTER JOIN users AS users_1 ON users_1.id = chat_messages.from_user_id LEFT OUTER JOIN users AS users_2 ON users_2.id = chat_messages.to_user_id LEFT OUTER JOIN makler AS makler_1 ON makler_1.id = chat_messages.from_makler_id LEFT OUTER JOIN makler AS makler_2 ON makler_2.id = chat_messages.to_makler_id 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_makler_id = ? OR chat_messages.from_makler_id = ? AND (chat_messages.to_user_id = ? OR chat_messages.to_user_id IS NULL) ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 1, 1, 6, 100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 954, in get_conversation_messages
    messages = query.order_by(ChatMessage.erstellt_am.desc()).limit(limit).all()
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.hashed_password AS users_1_hashed_password, users_1.is_active AS users_1_is_active, users_1.role AS users_1_role, users_1.created_at AS users_1_created_at, users_1.updated_at AS users_1_updated_at, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.hashed_password AS users_2_hashed_password, users_2.is_active AS users_2_is_active, users_2.role AS users_2_role, users_2.created_at AS users_2_created_at, users_2.updated_at AS users_2_updated_at, makler_1.id AS makler_1_id, makler_1.firmenname AS makler_1_firmenname, makler_1.ansprechpartner AS makler_1_ansprechpartner, makler_1.email AS makler_1_email, makler_1.adresse AS makler_1_adresse, makler_1.vertragsstart_datum AS makler_1_vertragsstart_datum, makler_1.testphase_leads AS makler_1_testphase_leads, makler_1.testphase_preis AS makler_1_testphase_preis, makler_1.standard_preis AS makler_1_standard_preis, makler_1.monatliche_soll_leads AS makler_1_monatliche_soll_leads, makler_1.rechnungs_code AS makler_1_rechnungs_code, makler_1.notizen AS makler_1_notizen, makler_1.gebiet AS makler_1_gebiet, makler_1.gatelink_password AS makler_1_gatelink_password, makler_1.vertrag_pausiert AS makler_1_vertrag_pausiert, makler_1.vertrag_bis AS makler_1_vertrag_bis, makler_1.created_by_user_id AS makler_1_created_by_user_id, makler_1.modified_by_user_id AS makler_1_modified_by_user_id, makler_1.rechnungssystem_typ AS makler_1_rechnungssystem_typ, makler_1.erste_leads_anzahl AS makler_1_erste_leads_anzahl, makler_1.erste_leads_preis AS makler_1_erste_leads_preis, makler_1.erste_leads_danach_preis AS makler_1_erste_leads_danach_preis, makler_1.automatische_aufladung_aktiv AS makler_1_automatische_aufladung_aktiv, makler_1.automatische_aufladung_betrag AS makler_1_automatische_aufladung_betrag, makler_1.automatische_aufladung_tag AS makler_1_automatische_aufladung_tag, makler_2.id AS makler_2_id, makler_2.firmenname AS makler_2_firmenname, makler_2.ansprechpartner AS makler_2_ansprechpartner, makler_2.email AS makler_2_email, makler_2.adresse AS makler_2_adresse, makler_2.vertragsstart_datum AS makler_2_vertragsstart_datum, makler_2.testphase_leads AS makler_2_testphase_leads, makler_2.testphase_preis AS makler_2_testphase_preis, makler_2.standard_preis AS makler_2_standard_preis, makler_2.monatliche_soll_leads AS makler_2_monatliche_soll_leads, makler_2.rechnungs_code AS makler_2_rechnungs_code, makler_2.notizen AS makler_2_notizen, makler_2.gebiet AS makler_2_gebiet, makler_2.gatelink_password AS makler_2_gatelink_password, makler_2.vertrag_pausiert AS makler_2_vertrag_pausiert, makler_2.vertrag_bis AS makler_2_vertrag_bis, makler_2.created_by_user_id AS makler_2_created_by_user_id, makler_2.modified_by_user_id AS makler_2_modified_by_user_id, makler_2.rechnungssystem_typ AS makler_2_rechnungssystem_typ, makler_2.erste_leads_anzahl AS makler_2_erste_leads_anzahl, makler_2.erste_leads_preis AS makler_2_erste_leads_preis, makler_2.erste_leads_danach_preis AS makler_2_erste_leads_danach_preis, makler_2.automatische_aufladung_aktiv AS makler_2_automatische_aufladung_aktiv, makler_2.automatische_aufladung_betrag AS makler_2_automatische_aufladung_betrag, makler_2.automatische_aufladung_tag AS makler_2_automatische_aufladung_tag 
FROM chat_messages LEFT OUTER JOIN users AS users_1 ON users_1.id = chat_messages.from_user_id LEFT OUTER JOIN users AS users_2 ON users_2.id = chat_messages.to_user_id LEFT OUTER JOIN makler AS makler_1 ON makler_1.id = chat_messages.from_makler_id LEFT OUTER JOIN makler AS makler_2 ON makler_2.id = chat_messages.to_makler_id 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_makler_id = ? OR chat_messages.from_makler_id = ? AND (chat_messages.to_user_id = ? OR chat_messages.to_user_id IS NULL) ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 1, 1, 6, 100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:45:41,285 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:45:41,620 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.hashed_password AS users_1_hashed_password, users_1.is_active AS users_1_is_active, users_1.role AS users_1_role, users_1.created_at AS users_1_created_at, users_1.updated_at AS users_1_updated_at, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.hashed_password AS users_2_hashed_password, users_2.is_active AS users_2_is_active, users_2.role AS users_2_role, users_2.created_at AS users_2_created_at, users_2.updated_at AS users_2_updated_at, makler_1.id AS makler_1_id, makler_1.firmenname AS makler_1_firmenname, makler_1.ansprechpartner AS makler_1_ansprechpartner, makler_1.email AS makler_1_email, makler_1.adresse AS makler_1_adresse, makler_1.vertragsstart_datum AS makler_1_vertragsstart_datum, makler_1.testphase_leads AS makler_1_testphase_leads, makler_1.testphase_preis AS makler_1_testphase_preis, makler_1.standard_preis AS makler_1_standard_preis, makler_1.monatliche_soll_leads AS makler_1_monatliche_soll_leads, makler_1.rechnungs_code AS makler_1_rechnungs_code, makler_1.notizen AS makler_1_notizen, makler_1.gebiet AS makler_1_gebiet, makler_1.gatelink_password AS makler_1_gatelink_password, makler_1.vertrag_pausiert AS makler_1_vertrag_pausiert, makler_1.vertrag_bis AS makler_1_vertrag_bis, makler_1.created_by_user_id AS makler_1_created_by_user_id, makler_1.modified_by_user_id AS makler_1_modified_by_user_id, makler_1.rechnungssystem_typ AS makler_1_rechnungssystem_typ, makler_1.erste_leads_anzahl AS makler_1_erste_leads_anzahl, makler_1.erste_leads_preis AS makler_1_erste_leads_preis, makler_1.erste_leads_danach_preis AS makler_1_erste_leads_danach_preis, makler_1.automatische_aufladung_aktiv AS makler_1_automatische_aufladung_aktiv, makler_1.automatische_aufladung_betrag AS makler_1_automatische_aufladung_betrag, makler_1.automatische_aufladung_tag AS makler_1_automatische_aufladung_tag, makler_2.id AS makler_2_id, makler_2.firmenname AS makler_2_firmenname, makler_2.ansprechpartner AS makler_2_ansprechpartner, makler_2.email AS makler_2_email, makler_2.adresse AS makler_2_adresse, makler_2.vertragsstart_datum AS makler_2_vertragsstart_datum, makler_2.testphase_leads AS makler_2_testphase_leads, makler_2.testphase_preis AS makler_2_testphase_preis, makler_2.standard_preis AS makler_2_standard_preis, makler_2.monatliche_soll_leads AS makler_2_monatliche_soll_leads, makler_2.rechnungs_code AS makler_2_rechnungs_code, makler_2.notizen AS makler_2_notizen, makler_2.gebiet AS makler_2_gebiet, makler_2.gatelink_password AS makler_2_gatelink_password, makler_2.vertrag_pausiert AS makler_2_vertrag_pausiert, makler_2.vertrag_bis AS makler_2_vertrag_bis, makler_2.created_by_user_id AS makler_2_created_by_user_id, makler_2.modified_by_user_id AS makler_2_modified_by_user_id, makler_2.rechnungssystem_typ AS makler_2_rechnungssystem_typ, makler_2.erste_leads_anzahl AS makler_2_erste_leads_anzahl, makler_2.erste_leads_preis AS makler_2_erste_leads_preis, makler_2.erste_leads_danach_preis AS makler_2_erste_leads_danach_preis, makler_2.automatische_aufladung_aktiv AS makler_2_automatische_aufladung_aktiv, makler_2.automatische_aufladung_betrag AS makler_2_automatische_aufladung_betrag, makler_2.automatische_aufladung_tag AS makler_2_automatische_aufladung_tag 
FROM chat_messages LEFT OUTER JOIN users AS users_1 ON users_1.id = chat_messages.from_user_id LEFT OUTER JOIN users AS users_2 ON users_2.id = chat_messages.to_user_id LEFT OUTER JOIN makler AS makler_1 ON makler_1.id = chat_messages.from_makler_id LEFT OUTER JOIN makler AS makler_2 ON makler_2.id = chat_messages.to_makler_id 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_makler_id = ? OR chat_messages.from_makler_id = ? AND (chat_messages.to_user_id = ? OR chat_messages.to_user_id IS NULL) ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 1, 1, 6, 100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 954, in get_conversation_messages
    messages = query.order_by(ChatMessage.erstellt_am.desc()).limit(limit).all()
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen, users_1.id AS users_1_id, users_1.username AS users_1_username, users_1.email AS users_1_email, users_1.hashed_password AS users_1_hashed_password, users_1.is_active AS users_1_is_active, users_1.role AS users_1_role, users_1.created_at AS users_1_created_at, users_1.updated_at AS users_1_updated_at, users_2.id AS users_2_id, users_2.username AS users_2_username, users_2.email AS users_2_email, users_2.hashed_password AS users_2_hashed_password, users_2.is_active AS users_2_is_active, users_2.role AS users_2_role, users_2.created_at AS users_2_created_at, users_2.updated_at AS users_2_updated_at, makler_1.id AS makler_1_id, makler_1.firmenname AS makler_1_firmenname, makler_1.ansprechpartner AS makler_1_ansprechpartner, makler_1.email AS makler_1_email, makler_1.adresse AS makler_1_adresse, makler_1.vertragsstart_datum AS makler_1_vertragsstart_datum, makler_1.testphase_leads AS makler_1_testphase_leads, makler_1.testphase_preis AS makler_1_testphase_preis, makler_1.standard_preis AS makler_1_standard_preis, makler_1.monatliche_soll_leads AS makler_1_monatliche_soll_leads, makler_1.rechnungs_code AS makler_1_rechnungs_code, makler_1.notizen AS makler_1_notizen, makler_1.gebiet AS makler_1_gebiet, makler_1.gatelink_password AS makler_1_gatelink_password, makler_1.vertrag_pausiert AS makler_1_vertrag_pausiert, makler_1.vertrag_bis AS makler_1_vertrag_bis, makler_1.created_by_user_id AS makler_1_created_by_user_id, makler_1.modified_by_user_id AS makler_1_modified_by_user_id, makler_1.rechnungssystem_typ AS makler_1_rechnungssystem_typ, makler_1.erste_leads_anzahl AS makler_1_erste_leads_anzahl, makler_1.erste_leads_preis AS makler_1_erste_leads_preis, makler_1.erste_leads_danach_preis AS makler_1_erste_leads_danach_preis, makler_1.automatische_aufladung_aktiv AS makler_1_automatische_aufladung_aktiv, makler_1.automatische_aufladung_betrag AS makler_1_automatische_aufladung_betrag, makler_1.automatische_aufladung_tag AS makler_1_automatische_aufladung_tag, makler_2.id AS makler_2_id, makler_2.firmenname AS makler_2_firmenname, makler_2.ansprechpartner AS makler_2_ansprechpartner, makler_2.email AS makler_2_email, makler_2.adresse AS makler_2_adresse, makler_2.vertragsstart_datum AS makler_2_vertragsstart_datum, makler_2.testphase_leads AS makler_2_testphase_leads, makler_2.testphase_preis AS makler_2_testphase_preis, makler_2.standard_preis AS makler_2_standard_preis, makler_2.monatliche_soll_leads AS makler_2_monatliche_soll_leads, makler_2.rechnungs_code AS makler_2_rechnungs_code, makler_2.notizen AS makler_2_notizen, makler_2.gebiet AS makler_2_gebiet, makler_2.gatelink_password AS makler_2_gatelink_password, makler_2.vertrag_pausiert AS makler_2_vertrag_pausiert, makler_2.vertrag_bis AS makler_2_vertrag_bis, makler_2.created_by_user_id AS makler_2_created_by_user_id, makler_2.modified_by_user_id AS makler_2_modified_by_user_id, makler_2.rechnungssystem_typ AS makler_2_rechnungssystem_typ, makler_2.erste_leads_anzahl AS makler_2_erste_leads_anzahl, makler_2.erste_leads_preis AS makler_2_erste_leads_preis, makler_2.erste_leads_danach_preis AS makler_2_erste_leads_danach_preis, makler_2.automatische_aufladung_aktiv AS makler_2_automatische_aufladung_aktiv, makler_2.automatische_aufladung_betrag AS makler_2_automatische_aufladung_betrag, makler_2.automatische_aufladung_tag AS makler_2_automatische_aufladung_tag 
FROM chat_messages LEFT OUTER JOIN users AS users_1 ON users_1.id = chat_messages.from_user_id LEFT OUTER JOIN users AS users_2 ON users_2.id = chat_messages.to_user_id LEFT OUTER JOIN makler AS makler_1 ON makler_1.id = chat_messages.from_makler_id LEFT OUTER JOIN makler AS makler_2 ON makler_2.id = chat_messages.to_makler_id 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_makler_id = ? OR chat_messages.from_makler_id = ? AND (chat_messages.to_user_id = ? OR chat_messages.to_user_id IS NULL) ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 1, 1, 6, 100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:45:43,285 - leadgate.main - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: chat_messages.chat_gruppe_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\GateCRMLINK\backend\routers\auth.py", line 751, in get_conversations
    ).order_by(ChatMessage.erstellt_am.desc()).first()
                                               ~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Agentur\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: chat_messages.chat_gruppe_id
[SQL: SELECT chat_messages.id AS chat_messages_id, chat_messages.from_user_id AS chat_messages_from_user_id, chat_messages.from_makler_id AS chat_messages_from_makler_id, chat_messages.to_user_id AS chat_messages_to_user_id, chat_messages.to_makler_id AS chat_messages_to_makler_id, chat_messages.chat_gruppe_id AS chat_messages_chat_gruppe_id, chat_messages.nachricht AS chat_messages_nachricht, chat_messages.erstellt_am AS chat_messages_erstellt_am, chat_messages.gelesen AS chat_messages_gelesen 
FROM chat_messages 
WHERE chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? OR chat_messages.from_user_id = ? AND chat_messages.to_user_id = ? ORDER BY chat_messages.erstellt_am DESC
 LIMIT ? OFFSET ?]
[parameters: (6, 7, 7, 6, 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-07 00:47:41,277 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 00:47:41,278 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 00:47:41,278 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-07 00:47:41,278 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:47:41,279 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 00:47:41,279 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:99]
2026-01-07 00:47:41,279 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 00:47:41,279 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 00:47:41,280 - python_multipart.multipart - DEBUG - Calling on_header_field with data[143:162]
2026-01-07 00:47:41,280 - python_multipart.multipart - DEBUG - Calling on_header_value with data[164:190]
2026-01-07 00:47:41,280 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:47:41,280 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 00:47:41,281 - python_multipart.multipart - DEBUG - Calling on_part_data with data[194:198]
2026-01-07 00:47:41,281 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 00:47:41,281 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 00:47:47,265 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 00:47:47,266 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 00:47:47,266 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-07 00:47:47,266 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:47:47,266 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 00:47:47,267 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:99]
2026-01-07 00:47:47,267 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 00:47:47,267 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 00:47:47,268 - python_multipart.multipart - DEBUG - Calling on_header_field with data[143:162]
2026-01-07 00:47:47,268 - python_multipart.multipart - DEBUG - Calling on_header_value with data[164:190]
2026-01-07 00:47:47,268 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:47:47,268 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 00:47:47,269 - python_multipart.multipart - DEBUG - Calling on_part_data with data[194:200]
2026-01-07 00:47:47,269 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 00:47:47,269 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 00:48:02,048 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 00:48:02,050 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 00:48:02,051 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-07 00:48:02,051 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:48:02,051 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 00:48:02,052 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-07 00:48:02,052 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 00:48:02,052 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 00:48:02,053 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-07 00:48:02,053 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-07 00:48:02,053 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:48:02,054 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 00:48:02,054 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:195]
2026-01-07 00:48:02,054 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 00:48:02,055 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 00:48:08,681 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 00:48:08,682 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 00:48:08,682 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-07 00:48:08,682 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:48:08,682 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 00:48:08,682 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-07 00:48:08,683 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 00:48:08,683 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 00:48:08,683 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-07 00:48:08,683 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-07 00:48:08,683 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:48:08,683 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 00:48:08,684 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:199]
2026-01-07 00:48:08,684 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 00:48:08,684 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 00:53:47,879 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 00:53:47,880 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 00:53:47,880 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-07 00:53:47,881 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:53:47,881 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 00:53:47,881 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-07 00:53:47,881 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 00:53:47,882 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 00:53:47,882 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-07 00:53:47,882 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-07 00:53:47,882 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:53:47,883 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 00:53:47,883 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:195]
2026-01-07 00:53:47,883 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 00:53:47,884 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 00:53:54,010 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 00:53:54,011 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 00:53:54,011 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-07 00:53:54,011 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:53:54,012 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 00:53:54,012 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-07 00:53:54,013 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 00:53:54,013 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 00:53:54,013 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-07 00:53:54,014 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-07 00:53:54,014 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 00:53:54,014 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 00:53:54,014 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:199]
2026-01-07 00:53:54,014 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 00:53:54,015 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 14:08:47,151 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 14:08:47,180 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 14:08:47,181 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-07 14:08:47,181 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 14:08:47,181 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 14:08:47,183 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-07 14:08:47,183 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 14:08:47,184 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 14:08:47,184 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-07 14:08:47,184 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-07 14:08:47,185 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 14:08:47,185 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 14:08:47,185 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:199]
2026-01-07 14:08:47,185 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 14:08:47,186 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 15:09:48,327 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 15:09:48,328 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 15:09:48,329 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:86]
2026-01-07 15:09:48,329 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 15:09:48,329 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 15:09:48,330 - python_multipart.multipart - DEBUG - Calling on_part_data with data[90:108]
2026-01-07 15:09:48,330 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 15:09:48,331 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 15:09:48,331 - python_multipart.multipart - DEBUG - Calling on_header_field with data[152:171]
2026-01-07 15:09:48,331 - python_multipart.multipart - DEBUG - Calling on_header_value with data[173:199]
2026-01-07 15:09:48,332 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 15:09:48,332 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 15:09:48,333 - python_multipart.multipart - DEBUG - Calling on_part_data with data[203:208]
2026-01-07 15:09:48,333 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 15:09:48,333 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 15:09:50,073 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 15:09:50,074 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 15:09:50,074 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:86]
2026-01-07 15:09:50,074 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 15:09:50,075 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 15:09:50,075 - python_multipart.multipart - DEBUG - Calling on_part_data with data[90:108]
2026-01-07 15:09:50,076 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 15:09:50,076 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 15:09:50,076 - python_multipart.multipart - DEBUG - Calling on_header_field with data[152:171]
2026-01-07 15:09:50,076 - python_multipart.multipart - DEBUG - Calling on_header_value with data[173:199]
2026-01-07 15:09:50,077 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 15:09:50,077 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 15:09:50,078 - python_multipart.multipart - DEBUG - Calling on_part_data with data[203:209]
2026-01-07 15:09:50,078 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 15:09:50,079 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 15:09:54,989 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 15:09:54,990 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 15:09:54,990 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:86]
2026-01-07 15:09:54,990 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 15:09:54,991 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 15:09:54,991 - python_multipart.multipart - DEBUG - Calling on_part_data with data[90:108]
2026-01-07 15:09:54,991 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 15:09:54,992 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 15:09:54,992 - python_multipart.multipart - DEBUG - Calling on_header_field with data[152:171]
2026-01-07 15:09:54,993 - python_multipart.multipart - DEBUG - Calling on_header_value with data[173:199]
2026-01-07 15:09:54,993 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 15:09:54,994 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 15:09:54,994 - python_multipart.multipart - DEBUG - Calling on_part_data with data[203:211]
2026-01-07 15:09:54,994 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 15:09:54,995 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 15:30:46,585 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 15:30:46,585 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 15:30:46,585 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:86]
2026-01-07 15:30:46,585 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 15:30:46,585 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 15:30:46,586 - python_multipart.multipart - DEBUG - Calling on_part_data with data[90:101]
2026-01-07 15:30:46,586 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 15:30:46,586 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 15:30:46,586 - python_multipart.multipart - DEBUG - Calling on_header_field with data[145:164]
2026-01-07 15:30:46,586 - python_multipart.multipart - DEBUG - Calling on_header_value with data[166:192]
2026-01-07 15:30:46,586 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 15:30:46,586 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 15:30:46,587 - python_multipart.multipart - DEBUG - Calling on_part_data with data[196:204]
2026-01-07 15:30:46,587 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 15:30:46,587 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 15:30:50,671 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 15:30:50,671 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 15:30:50,671 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:86]
2026-01-07 15:30:50,671 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 15:30:50,672 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 15:30:50,672 - python_multipart.multipart - DEBUG - Calling on_part_data with data[90:101]
2026-01-07 15:30:50,672 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 15:30:50,672 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 15:30:50,672 - python_multipart.multipart - DEBUG - Calling on_header_field with data[145:164]
2026-01-07 15:30:50,672 - python_multipart.multipart - DEBUG - Calling on_header_value with data[166:192]
2026-01-07 15:30:50,672 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 15:30:50,673 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 15:30:50,673 - python_multipart.multipart - DEBUG - Calling on_part_data with data[196:201]
2026-01-07 15:30:50,673 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 15:30:50,673 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 15:30:52,872 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 15:30:52,872 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 15:30:52,872 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:86]
2026-01-07 15:30:52,873 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 15:30:52,873 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 15:30:52,873 - python_multipart.multipart - DEBUG - Calling on_part_data with data[90:101]
2026-01-07 15:30:52,873 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 15:30:52,873 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 15:30:52,874 - python_multipart.multipart - DEBUG - Calling on_header_field with data[145:164]
2026-01-07 15:30:52,874 - python_multipart.multipart - DEBUG - Calling on_header_value with data[166:192]
2026-01-07 15:30:52,874 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 15:30:52,874 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 15:30:52,874 - python_multipart.multipart - DEBUG - Calling on_part_data with data[196:202]
2026-01-07 15:30:52,874 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 15:30:52,874 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 15:38:42,632 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 15:38:42,632 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 15:38:42,632 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:106]
2026-01-07 15:38:42,633 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 15:38:42,633 - python_multipart.multipart - DEBUG - Calling on_header_field with data[108:120]
2026-01-07 15:38:42,633 - python_multipart.multipart - DEBUG - Calling on_header_value with data[122:130]
2026-01-07 15:38:42,633 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 15:38:42,633 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 15:38:42,634 - python_multipart.multipart - DEBUG - Calling on_part_data with data[134:352]
2026-01-07 15:38:42,634 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 15:38:42,634 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 15:38:42,668 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 15:38:42,668 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 15:38:42,668 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:114]
2026-01-07 15:38:42,668 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 15:38:42,669 - python_multipart.multipart - DEBUG - Calling on_header_field with data[116:128]
2026-01-07 15:38:42,669 - python_multipart.multipart - DEBUG - Calling on_header_value with data[130:138]
2026-01-07 15:38:42,669 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 15:38:42,669 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 15:38:42,669 - python_multipart.multipart - DEBUG - Calling on_part_data with data[142:301]
2026-01-07 15:38:42,669 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 15:38:42,670 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 15:38:42,685 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 15:38:42,685 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 15:38:42,685 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:113]
2026-01-07 15:38:42,685 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 15:38:42,686 - python_multipart.multipart - DEBUG - Calling on_header_field with data[115:127]
2026-01-07 15:38:42,686 - python_multipart.multipart - DEBUG - Calling on_header_value with data[129:137]
2026-01-07 15:38:42,686 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 15:38:42,686 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 15:38:42,686 - python_multipart.multipart - DEBUG - Calling on_part_data with data[141:302]
2026-01-07 15:38:42,686 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 15:38:42,687 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 15:56:26,224 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 15:56:26,224 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 15:56:26,225 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-07 15:56:26,225 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 15:56:26,225 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 15:56:26,225 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-07 15:56:26,225 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 15:56:26,225 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 15:56:26,226 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-07 15:56:26,226 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-07 15:56:26,226 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 15:56:26,226 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 15:56:26,226 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:199]
2026-01-07 15:56:26,226 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 15:56:26,226 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 17:09:45,568 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 17:09:45,569 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 17:09:45,569 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-07 17:09:45,569 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 17:09:45,570 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 17:09:45,570 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-07 17:09:45,570 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 17:09:45,570 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 17:09:45,570 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-07 17:09:45,571 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-07 17:09:45,571 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 17:09:45,571 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 17:09:45,571 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:199]
2026-01-07 17:09:45,571 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 17:09:45,571 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 17:41:23,624 - PIL.PngImagePlugin - DEBUG - STREAM b'IHDR' 16 13
2026-01-07 17:41:23,624 - PIL.PngImagePlugin - DEBUG - STREAM b'pHYs' 41 9
2026-01-07 17:41:23,624 - PIL.PngImagePlugin - DEBUG - STREAM b'IDAT' 62 8192
2026-01-07 17:41:23,625 - PIL.PngImagePlugin - DEBUG - STREAM b'IHDR' 16 13
2026-01-07 17:41:23,625 - PIL.PngImagePlugin - DEBUG - STREAM b'pHYs' 41 9
2026-01-07 17:41:23,625 - PIL.PngImagePlugin - DEBUG - STREAM b'IDAT' 62 8192
2026-01-07 21:05:46,416 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 21:05:46,417 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 21:05:46,417 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-07 21:05:46,417 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 21:05:46,418 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 21:05:46,418 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-07 21:05:46,418 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 21:05:46,418 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 21:05:46,419 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-07 21:05:46,419 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-07 21:05:46,419 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 21:05:46,419 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 21:05:46,420 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:199]
2026-01-07 21:05:46,420 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 21:05:46,420 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-07 22:51:37,013 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 22:51:37,042 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-07 22:51:37,042 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-07 22:51:37,042 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 22:51:37,043 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 22:51:37,043 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-07 22:51:37,043 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 22:51:37,043 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-07 22:51:37,044 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-07 22:51:37,044 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-07 22:51:37,044 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-07 22:51:37,044 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-07 22:51:37,045 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:199]
2026-01-07 22:51:37,045 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-07 22:51:37,045 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-08 01:47:40,073 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-08 01:47:40,104 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-08 01:47:40,104 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-08 01:47:40,104 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-08 01:47:40,105 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-08 01:47:40,105 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-08 01:47:40,105 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-08 01:47:40,105 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-08 01:47:40,106 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-08 01:47:40,106 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-08 01:47:40,106 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-08 01:47:40,106 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-08 01:47:40,107 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:200]
2026-01-08 01:47:40,107 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-08 01:47:40,107 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-08 01:47:48,723 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-08 01:47:48,724 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-08 01:47:48,724 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-08 01:47:48,724 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-08 01:47:48,724 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-08 01:47:48,724 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-08 01:47:48,725 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-08 01:47:48,725 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-08 01:47:48,725 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-08 01:47:48,725 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-08 01:47:48,725 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-08 01:47:48,726 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-08 01:47:48,726 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:199]
2026-01-08 01:47:48,726 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-08 01:47:48,726 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-12 14:07:10,166 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-12 14:07:10,167 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-12 14:07:10,167 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-12 14:07:10,167 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-12 14:07:10,168 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-12 14:07:10,168 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-12 14:07:10,168 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-12 14:07:10,168 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-12 14:07:10,168 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-12 14:07:10,168 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-12 14:07:10,169 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-12 14:07:10,169 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-12 14:07:10,169 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:199]
2026-01-12 14:07:10,169 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-12 14:07:10,169 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-12 14:07:57,605 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-12 14:07:57,605 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-12 14:07:57,605 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:86]
2026-01-12 14:07:57,605 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-12 14:07:57,605 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-12 14:07:57,606 - python_multipart.multipart - DEBUG - Calling on_part_data with data[90:108]
2026-01-12 14:07:57,606 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-12 14:07:57,606 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-12 14:07:57,606 - python_multipart.multipart - DEBUG - Calling on_header_field with data[152:171]
2026-01-12 14:07:57,606 - python_multipart.multipart - DEBUG - Calling on_header_value with data[173:199]
2026-01-12 14:07:57,607 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-12 14:07:57,607 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-12 14:07:57,608 - python_multipart.multipart - DEBUG - Calling on_part_data with data[203:208]
2026-01-12 14:07:57,608 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-12 14:07:57,608 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-12 14:08:01,351 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-12 14:08:01,351 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-12 14:08:01,351 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:86]
2026-01-12 14:08:01,351 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-12 14:08:01,351 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-12 14:08:01,352 - python_multipart.multipart - DEBUG - Calling on_part_data with data[90:108]
2026-01-12 14:08:01,352 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-12 14:08:01,352 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-12 14:08:01,352 - python_multipart.multipart - DEBUG - Calling on_header_field with data[152:171]
2026-01-12 14:08:01,352 - python_multipart.multipart - DEBUG - Calling on_header_value with data[173:199]
2026-01-12 14:08:01,352 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-12 14:08:01,352 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-12 14:08:01,353 - python_multipart.multipart - DEBUG - Calling on_part_data with data[203:209]
2026-01-12 14:08:01,353 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-12 14:08:01,353 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-12 14:08:03,310 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-12 14:08:03,310 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-12 14:08:03,310 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:86]
2026-01-12 14:08:03,310 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-12 14:08:03,310 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-12 14:08:03,311 - python_multipart.multipart - DEBUG - Calling on_part_data with data[90:108]
2026-01-12 14:08:03,311 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-12 14:08:03,311 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-12 14:08:03,311 - python_multipart.multipart - DEBUG - Calling on_header_field with data[152:171]
2026-01-12 14:08:03,311 - python_multipart.multipart - DEBUG - Calling on_header_value with data[173:199]
2026-01-12 14:08:03,311 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-12 14:08:03,311 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-12 14:08:03,312 - python_multipart.multipart - DEBUG - Calling on_part_data with data[203:208]
2026-01-12 14:08:03,312 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-12 14:08:03,312 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-12 14:08:21,162 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-12 14:08:21,162 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-12 14:08:21,162 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:86]
2026-01-12 14:08:21,162 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-12 14:08:21,162 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-12 14:08:21,162 - python_multipart.multipart - DEBUG - Calling on_part_data with data[90:108]
2026-01-12 14:08:21,162 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-12 14:08:21,163 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-12 14:08:21,163 - python_multipart.multipart - DEBUG - Calling on_header_field with data[152:171]
2026-01-12 14:08:21,163 - python_multipart.multipart - DEBUG - Calling on_header_value with data[173:199]
2026-01-12 14:08:21,163 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-12 14:08:21,163 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-12 14:08:21,163 - python_multipart.multipart - DEBUG - Calling on_part_data with data[203:208]
2026-01-12 14:08:21,164 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-12 14:08:21,164 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-12 14:08:35,121 - stripe - INFO - message='Request to Stripe api' method=post url=https://api.stripe.com/v1/payment_intents
2026-01-12 14:08:35,121 - stripe - DEBUG - api_version=2025-12-15.clover message='Post details' post_data=amount=59529&currency=eur&description=Credits-Aufladung+f%C3%BCr+5+Leads&metadata[makler_id]=3&metadata[makler_firmenname]=Theisen+Immobilien&metadata[betrag_netto_euro]=500.0&metadata[betrag_brutto_euro]=595.3&metadata[mwst_euro]=95.0&metadata[transaktionsgebuehr_euro]=0.3&automatic_payment_methods[enabled]=true
2026-01-12 14:08:35,126 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.stripe.com:443
2026-01-12 14:08:36,065 - urllib3.connectionpool - DEBUG - https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 2059
2026-01-12 14:08:36,066 - stripe - INFO - message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2026-01-12 14:08:36,066 - stripe - DEBUG - body='{\n  "id": "pi_3SokrHK0VJts9ADL00E93FzF",\n  "object": "payment_intent",\n  "amount": 59529,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": {\n    "allow_redirects": "always",\n    "enabled": true\n  },\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic_async",\n  "client_secret": "pi_3SokrHK0VJts9ADL00E93FzF_secret_cNHtkXsPfl1XbOY1Ye4VWwvgt",\n  "confirmation_method": "automatic",\n  "created": 1768223315,\n  "currency": "eur",\n  "customer": null,\n  "customer_account": null,\n  "description": "Credits-Aufladung für 5 Leads",\n  "excluded_payment_method_types": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": true,\n  "metadata": {\n    "betrag_brutto_euro": "595.3",\n    "betrag_netto_euro": "500.0",\n    "makler_firmenname": "Theisen Immobilien",\n    "makler_id": "3",\n    "mwst_euro": "95.0",\n    "transaktionsgebuehr_euro": "0.3"\n  },\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_configuration_details": {\n    "id": "pmc_1SlYLYK0VJts9ADLoJIDLMHU",\n    "parent": null\n  },\n  "payment_method_options": {\n    "amazon_pay": {\n      "express_checkout_element_session_id": null\n    },\n    "bancontact": {\n      "preferred_language": "en"\n    },\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    },\n    "eps": {},\n    "klarna": {\n      "preferred_locale": null\n    },\n    "link": {\n      "persistent_token": null\n    }\n  },\n  "payment_method_types": [\n    "card",\n    "bancontact",\n    "eps",\n    "klarna",\n    "link",\n    "amazon_pay"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2026-01-12 14:08:36,067 - stripe - DEBUG - link=https://dashboard.stripe.com/live/logs/req_vzEcxbGWXpG86D message='Dashboard link for request'
2026-01-12 14:12:16,732 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-12 14:12:16,733 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-12 14:12:16,733 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:86]
2026-01-12 14:12:16,733 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-12 14:12:16,733 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-12 14:12:16,734 - python_multipart.multipart - DEBUG - Calling on_part_data with data[90:108]
2026-01-12 14:12:16,734 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-12 14:12:16,734 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-12 14:12:16,734 - python_multipart.multipart - DEBUG - Calling on_header_field with data[152:171]
2026-01-12 14:12:16,735 - python_multipart.multipart - DEBUG - Calling on_header_value with data[173:199]
2026-01-12 14:12:16,735 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-12 14:12:16,735 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-12 14:12:16,735 - python_multipart.multipart - DEBUG - Calling on_part_data with data[203:208]
2026-01-12 14:12:16,735 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-12 14:12:16,735 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-12 14:12:20,917 - stripe - INFO - message='Request to Stripe api' method=post url=https://api.stripe.com/v1/payment_intents
2026-01-12 14:12:20,917 - stripe - DEBUG - api_version=2025-12-15.clover message='Post details' post_data=amount=59529&currency=eur&description=Credits-Aufladung+f%C3%BCr+5+Leads&metadata[makler_id]=3&metadata[makler_firmenname]=Theisen+Immobilien&metadata[betrag_netto_euro]=500.0&metadata[betrag_brutto_euro]=595.3&metadata[mwst_euro]=95.0&metadata[transaktionsgebuehr_euro]=0.3&automatic_payment_methods[enabled]=true
2026-01-12 14:12:20,921 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.stripe.com:443
2026-01-12 14:12:21,792 - urllib3.connectionpool - DEBUG - https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 2059
2026-01-12 14:12:21,793 - stripe - INFO - message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2026-01-12 14:12:21,793 - stripe - DEBUG - body='{\n  "id": "pi_3SokuvK0VJts9ADL01zvRQsc",\n  "object": "payment_intent",\n  "amount": 59529,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": {\n    "allow_redirects": "always",\n    "enabled": true\n  },\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic_async",\n  "client_secret": "pi_3SokuvK0VJts9ADL01zvRQsc_secret_D9Yl7U0jo3AziNo1bjfD0Cy8H",\n  "confirmation_method": "automatic",\n  "created": 1768223541,\n  "currency": "eur",\n  "customer": null,\n  "customer_account": null,\n  "description": "Credits-Aufladung für 5 Leads",\n  "excluded_payment_method_types": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": true,\n  "metadata": {\n    "betrag_brutto_euro": "595.3",\n    "betrag_netto_euro": "500.0",\n    "makler_firmenname": "Theisen Immobilien",\n    "makler_id": "3",\n    "mwst_euro": "95.0",\n    "transaktionsgebuehr_euro": "0.3"\n  },\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_configuration_details": {\n    "id": "pmc_1SlYLYK0VJts9ADLoJIDLMHU",\n    "parent": null\n  },\n  "payment_method_options": {\n    "amazon_pay": {\n      "express_checkout_element_session_id": null\n    },\n    "bancontact": {\n      "preferred_language": "en"\n    },\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    },\n    "eps": {},\n    "klarna": {\n      "preferred_locale": null\n    },\n    "link": {\n      "persistent_token": null\n    }\n  },\n  "payment_method_types": [\n    "card",\n    "bancontact",\n    "eps",\n    "klarna",\n    "link",\n    "amazon_pay"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2026-01-12 14:12:21,793 - stripe - DEBUG - link=https://dashboard.stripe.com/live/logs/req_HyqbNwOAuAAWL6 message='Dashboard link for request'
2026-01-12 14:26:06,930 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-12 14:26:06,931 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-12 14:26:06,931 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:86]
2026-01-12 14:26:06,931 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-12 14:26:06,931 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-12 14:26:06,931 - python_multipart.multipart - DEBUG - Calling on_part_data with data[90:108]
2026-01-12 14:26:06,931 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-12 14:26:06,932 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-12 14:26:06,932 - python_multipart.multipart - DEBUG - Calling on_header_field with data[152:171]
2026-01-12 14:26:06,932 - python_multipart.multipart - DEBUG - Calling on_header_value with data[173:199]
2026-01-12 14:26:06,932 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-12 14:26:06,932 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-12 14:26:06,932 - python_multipart.multipart - DEBUG - Calling on_part_data with data[203:208]
2026-01-12 14:26:06,933 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-12 14:26:06,933 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-12 14:40:08,160 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-12 14:40:08,160 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-12 14:40:08,160 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-12 14:40:08,160 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-12 14:40:08,160 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-12 14:40:08,161 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-12 14:40:08,161 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-12 14:40:08,161 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-12 14:40:08,161 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-12 14:40:08,163 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-12 14:40:08,163 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-12 14:40:08,163 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-12 14:40:08,164 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:199]
2026-01-12 14:40:08,164 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-12 14:40:08,164 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-12 14:42:06,994 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-12 14:42:06,994 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-12 14:42:06,994 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-12 14:42:06,994 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-12 14:42:06,994 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-12 14:42:06,994 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-12 14:42:06,995 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-12 14:42:06,995 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-12 14:42:06,995 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-12 14:42:06,995 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-12 14:42:06,995 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-12 14:42:06,995 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-12 14:42:06,996 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:199]
2026-01-12 14:42:06,996 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-12 14:42:06,996 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-12 14:44:29,936 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-12 14:44:29,937 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-12 14:44:29,937 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-12 14:44:29,937 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-12 14:44:29,937 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-12 14:44:29,937 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-12 14:44:29,938 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-12 14:44:29,938 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-12 14:44:29,938 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-12 14:44:29,938 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-12 14:44:29,938 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-12 14:44:29,938 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-12 14:44:29,938 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:199]
2026-01-12 14:44:29,938 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-12 14:44:29,938 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-12 14:44:47,999 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-12 14:44:47,999 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-12 14:44:47,999 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-12 14:44:48,000 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-12 14:44:48,000 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-12 14:44:48,000 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:96]
2026-01-12 14:44:48,000 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-12 14:44:48,001 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-12 14:44:48,001 - python_multipart.multipart - DEBUG - Calling on_header_field with data[140:159]
2026-01-12 14:44:48,001 - python_multipart.multipart - DEBUG - Calling on_header_value with data[161:187]
2026-01-12 14:44:48,001 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-12 14:44:48,002 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-12 14:44:48,002 - python_multipart.multipart - DEBUG - Calling on_part_data with data[191:199]
2026-01-12 14:44:48,002 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-12 14:44:48,003 - python_multipart.multipart - DEBUG - Calling on_end with no data
